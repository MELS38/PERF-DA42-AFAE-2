<!DOCTYPE html>
<!-- saved from url=(47942)data:text/html;base64,PCFET0NUWVBFIGh0bWw+Cgo8IS0tIHNhdmVkIGZyb20gdXJsPSgwMDYyKWZpbGU6Ly8vQzovVXNlcnMvSFAvRG93bmxvYWRzL0RBNDJfVGFrZW9mZl9FRkJfaU9TX2ZpeGVkMi5odG1sIC0tPgo8aHRtbCBsYW5nPSJmciI+PGhlYWQ+PG1ldGEgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04IiBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiLz4KPG1ldGEgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEsIHZpZXdwb3J0LWZpdD1jb3ZlciIgbmFtZT0idmlld3BvcnQiLz4KPHRpdGxlPkRBNDIg4oCTIFRha2VvZmYgUGVyZm9ybWFuY2UgKEVGQik8L3RpdGxlPgo8bWV0YSBjb250ZW50PSJ5ZXMiIG5hbWU9ImFwcGxlLW1vYmlsZS13ZWItYXBwLWNhcGFibGUiLz4KPG1ldGEgY29udGVudD0iYmxhY2stdHJhbnNsdWNlbnQiIG5hbWU9ImFwcGxlLW1vYmlsZS13ZWItYXBwLXN0YXR1cy1iYXItc3R5bGUiLz4KPHN0eWxlPgoKICAgIDpyb290IHsKICAgICAgLS1iZzogIzBiMTAyMDsKICAgICAgLS1jYXJkOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDYpOwogICAgICAtLWNhcmQyOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDgpOwogICAgICAtLWxpbmU6IHJnYmEoMjU1LDI1NSwyNTUsMC4xMik7CiAgICAgIC0tdGV4dDogcmdiYSgyNTUsMjU1LDI1NSwwLjkyKTsKICAgICAgLS1tdXRlZDogcmdiYSgyNTUsMjU1LDI1NSwwLjYwKTsKICAgICAgLS1hY2NlbnQ6ICM3MGQ2ZmY7CiAgICAgIC0tZ29vZDogcmdiYSg1NiwyMDksMTM4LDAuOTUpOwogICAgICAtLWJhZDogcmdiYSgyNTUsOTIsMTIyLDAuOTgpOwogICAgICAtLXdhcm46IHJnYmEoMjU1LDE5NCw3MSwwLjk4KTsKICAgICAgLS1tb25vOiB1aS1tb25vc3BhY2UsIFNGTW9uby1SZWd1bGFyLCBNZW5sbywgTW9uYWNvLCBDb25zb2xhcywgIkxpYmVyYXRpb24gTW9ubyIsICJDb3VyaWVyIE5ldyIsIG1vbm9zcGFjZTsKICAgICAgLS1zYW5zOiB1aS1zYW5zLXNlcmlmLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEhlbHZldGljYSwgQXJpYWwsICJBcHBsZSBDb2xvciBFbW9qaSIsIlNlZ29lIFVJIEVtb2ppIjsKICAgICAgLS1yOiAxOHB4OwogICAgfQogICAgKntib3gtc2l6aW5nOmJvcmRlci1ib3h9CiAgICBib2R5ewogICAgICBtYXJnaW46MDsKICAgICAgZm9udC1mYW1pbHk6IHZhcigtLXNhbnMpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgICAgIGJhY2tncm91bmQ6CiAgICAgICAgcmFkaWFsLWdyYWRpZW50KDEwMDBweCA0MDBweCBhdCAyMCUgLTEwJSwgcmdiYSgxMTIsMjE0LDI1NSwwLjI1KSwgdHJhbnNwYXJlbnQgNjAlKSwKICAgICAgICByYWRpYWwtZ3JhZGllbnQoOTAwcHggNDIwcHggYXQgOTAlIDEwJSwgcmdiYSgyNTUsOTIsMTIyLDAuMTgpLCB0cmFuc3BhcmVudCA2MCUpLAogICAgICAgIHJhZGlhbC1ncmFkaWVudCg3MDBweCAzODBweCBhdCA1MCUgMTAwJSwgcmdiYSg1NiwyMDksMTM4LDAuMTYpLCB0cmFuc3BhcmVudCA2MCUpLAogICAgICAgIHZhcigtLWJnKTsKICAgICAgbWluLWhlaWdodDoxMDB2aDsKICAgIH0KICAgIC53cmFwe21heC13aWR0aDogMTEyMHB4OyBtYXJnaW46IDAgYXV0bzsgcGFkZGluZzogMjRweCAxOHB4IDEyMHB4O30KICAgIGhlYWRlcntkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBnYXA6MTZweDsgbWFyZ2luLWJvdHRvbTogMThweDt9CiAgICAuYnJhbmR7ZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMnB4O30KICAgIC5iYWRnZXt3aWR0aDoyOHB4OyBoZWlnaHQ6MjhweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCByZ2JhKDExMiwyMTQsMjU1LDAuOTUpLCByZ2JhKDI1NSw5MiwxMjIsMC44NSkpOyBib3gtc2hhZG93OiAwIDEycHggMzBweCByZ2JhKDExMiwyMTQsMjU1LDAuMTUpO30KICAgIGgxe2ZvbnQtc2l6ZTogMjBweDsgbWFyZ2luOjA7IGxldHRlci1zcGFjaW5nOjAuMnB4O30KICAgIC5zdWJ7Zm9udC1zaXplOiAxMi41cHg7IGNvbG9yOiB2YXIoLS1tdXRlZCk7IG1hcmdpbi10b3A6IDJweDt9CiAgICAudG9wcmlnaHR7ZGlzcGxheTpmbGV4OyBnYXA6OHB4OyBmbGV4LXdyYXA6d3JhcDsganVzdGlmeS1jb250ZW50OmZsZXgtZW5kO30KICAgIC5jaGlwe2ZvbnQtc2l6ZTogMTJweDsgY29sb3I6IHZhcigtLW11dGVkKTsgcGFkZGluZzogOHB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDk5OXB4OyBib3JkZXI6MXB4IHNvbGlkIHZhcigtLWxpbmUpOyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDQpO30KICAgIC5ncmlke2Rpc3BsYXk6Z3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxLjJmciAwLjhmcjsgZ2FwOiAxNHB4OyBhbGlnbi1pdGVtczpzdGFydDt9CiAgICAuY2FyZHtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWxpbmUpOyBib3JkZXItcmFkaXVzOiB2YXIoLS1yKTsgYmFja2dyb3VuZDogdmFyKC0tY2FyZCk7IGJveC1zaGFkb3c6IDAgMTJweCA0MHB4IHJnYmEoMCwwLDAsMC4yNSk7IG92ZXJmbG93OmhpZGRlbjt9CiAgICAuaGVhZHtwYWRkaW5nOiAxNHB4IDE2cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1saW5lKTsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjAzKTsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpmbGV4LXN0YXJ0OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgZ2FwOiAxMnB4O30KICAgIC50aXRsZTJ7Zm9udC1zaXplOiAxM3B4OyBmb250LXdlaWdodDogODAwOyBsZXR0ZXItc3BhY2luZzogMC4ycHg7fQogICAgLmhpbnR7Zm9udC1zaXplOiAxMnB4OyBjb2xvcjogdmFyKC0tbXV0ZWQpOyBtYXJnaW4tdG9wOiAzcHg7fQogICAgLnBpbGxyb3d7ZGlzcGxheTpmbGV4OyBnYXA6IDhweDsgZmxleC13cmFwOndyYXA7IGp1c3RpZnktY29udGVudDpmbGV4LWVuZDt9CiAgICAucGlsbHtmb250LXNpemU6IDExcHg7IGNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDAuODIpOyBwYWRkaW5nOiA2cHggMTBweDsgYm9yZGVyLXJhZGl1czogOTk5cHg7IGJvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEwKTsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjA0KTt9CiAgICAuYm9keXtwYWRkaW5nOiAxNHB4IDE2cHg7fQogICAgLnRhYnN7ZGlzcGxheTpmbGV4OyBnYXA6MTBweDsgbWFyZ2luLWJvdHRvbTogMTJweDt9CiAgICAudGFie2ZsZXg6MTsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBnYXA6MTBweDsgcGFkZGluZzogMTJweCAxMnB4OyBib3JkZXItcmFkaXVzOiAxNHB4OyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMTApOyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDQpOyBjdXJzb3I6cG9pbnRlcjsgdXNlci1zZWxlY3Q6bm9uZTt9CiAgICAudGFiLmFjdGl2ZXtib3JkZXItY29sb3I6IHJnYmEoMTEyLDIxNCwyNTUsMC41NSk7IGJhY2tncm91bmQ6IHJnYmEoMTEyLDIxNCwyNTUsMC4xMCk7fQogICAgLnRhYiAubGFiZWx7Zm9udC13ZWlnaHQ6IDgwMDsgZm9udC1zaXplOiAxMi41cHg7fQogICAgLnRhYiAubWV0YXtmb250LXNpemU6IDExcHg7IGNvbG9yOiB2YXIoLS1tdXRlZCk7fQogICAgLmZvcm1ncmlke2Rpc3BsYXk6Z3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyBnYXA6IDEwcHg7IG1hcmdpbi1ib3R0b206IDEycHg7fQogICAgLmZpZWxke2Rpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBnYXA6NnB4O30KICAgIGxhYmVse2ZvbnQtc2l6ZTogMTEuNXB4OyBjb2xvcjogdmFyKC0tbXV0ZWQpO30KICAgIGxhYmVsIHNwYW57Y29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsMC41NSk7IGZvbnQtd2VpZ2h0OjYwMDsgbWFyZ2luLWxlZnQ6IDRweDt9CiAgICBpbnB1dCwgc2VsZWN0ewogICAgICB3aWR0aDoxMDAlOwogICAgICBwYWRkaW5nOiAxMXB4IDEycHg7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIGJvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEwKTsKICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjI1KTsKICAgICAgY29sb3I6IHZhcigtLXRleHQpOwogICAgICBvdXRsaW5lOm5vbmU7CiAgICAgIGZvbnQtc2l6ZTogMTNweDsKICAgIH0KICAgIGlucHV0OmZvY3VzLCBzZWxlY3Q6Zm9jdXN7Ym9yZGVyLWNvbG9yOiByZ2JhKDExMiwyMTQsMjU1LDAuNjUpOyBib3gtc2hhZG93OiAwIDAgMCAzcHggcmdiYSgxMTIsMjE0LDI1NSwwLjEyKTt9CiAgICAuZGl2aWRlcntoZWlnaHQ6MXB4OyBiYWNrZ3JvdW5kOiB2YXIoLS1saW5lKTsgbWFyZ2luOiAxMnB4IDA7fQogICAgLnNlY3Rpb250aXRsZXtmb250LXNpemU6IDEycHg7IGZvbnQtd2VpZ2h0OiA4MDA7IGNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDAuODUpOyBtYXJnaW4tYm90dG9tOiA4cHg7fQogICAgLm9wdGdyaWR7ZGlzcGxheTpncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsgZ2FwOiA4cHg7fQogICAgLm9wdHtkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyBhbGlnbi1pdGVtczpmbGV4LXN0YXJ0OyBwYWRkaW5nOiAxMHB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDE0cHg7IGJvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEwKTsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjAzKTt9CiAgICAub3B0IGlucHV0e21hcmdpbi10b3A6IDJweDsgd2lkdGg6YXV0bzt9CiAgICAub3B0IC50e2ZvbnQtc2l6ZTogMTIuNXB4OyBmb250LXdlaWdodDo3MDA7fQogICAgLm9wdCAuZHtmb250LXNpemU6IDExcHg7IGNvbG9yOiB2YXIoLS1tdXRlZCk7IG1hcmdpbi10b3A6IDJweDt9CiAgICAucm93e2Rpc3BsYXk6Z3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyBnYXA6MTBweDt9CiAgICAuYnRucm93e2Rpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7IG1hcmdpbi10b3A6IDEycHg7fQogICAgLmJ0bntmbGV4OjE7IHBhZGRpbmc6IDEycHggMTJweDsgYm9yZGVyLXJhZGl1czogMTRweDsgYm9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMTIpOyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDYpOyBjb2xvcjogdmFyKC0tdGV4dCk7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDo4MDA7fQogICAgLmJ0bi5wcmltYXJ5e2JvcmRlci1jb2xvcjogcmdiYSgxMTIsMjE0LDI1NSwwLjU1KTsgYmFja2dyb3VuZDogcmdiYSgxMTIsMjE0LDI1NSwwLjE0KTt9CiAgICAuYnRuOmFjdGl2ZXt0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTt9CiAgICAuYWxlcnR7ZGlzcGxheTpub25lOyBtYXJnaW4tdG9wOiAxMnB4OyBwYWRkaW5nOiAxMHB4IDEycHg7IGJvcmRlci1yYWRpdXM6IDE0cHg7IGJvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMTk0LDcxLDAuNDUpOyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwxOTQsNzEsMC4xMik7IGNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDAuOTApOyBmb250LXNpemU6IDEycHg7fQogICAgLmtwaXtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4xMCk7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4wMyk7IGJvcmRlci1yYWRpdXM6IDE2cHg7IHBhZGRpbmc6IDEycHggMTJweDt9CiAgICAua3BpIC5re2ZvbnQtc2l6ZTogMTFweDsgY29sb3I6IHZhcigtLW11dGVkKTsgbWFyZ2luLWJvdHRvbTogNnB4O30KICAgIC5rcGkgLnZ7Zm9udC1zaXplOiAyNHB4OyBmb250LXdlaWdodDogOTAwOyBsZXR0ZXItc3BhY2luZzogMC4ycHg7fQogICAgLmtwaSAuc3tmb250LXNpemU6IDExcHg7IGNvbG9yOiB2YXIoLS1tdXRlZCk7IG1hcmdpbi10b3A6IDZweDt9CiAgICAubW9ub3tmb250LWZhbWlseTogdmFyKC0tbW9ubyk7fQogICAgLnZlcmRpY3R7ZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgZ2FwOiAxMHB4OyBhbGlnbi1pdGVtczpjZW50ZXI7IHBhZGRpbmc6IDEycHggMTJweDsgYm9yZGVyLXJhZGl1czogMTZweDsgbWFyZ2luLXRvcDogMTJweDsgYm9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMTApOyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDMpO30KICAgIC52ZXJkaWN0Lmdvb2R7Ym9yZGVyLWNvbG9yOiByZ2JhKDU2LDIwOSwxMzgsMC40NSk7IGJhY2tncm91bmQ6IHJnYmEoNTYsMjA5LDEzOCwwLjEyKTt9CiAgICAudmVyZGljdC5iYWR7Ym9yZGVyLWNvbG9yOiByZ2JhKDI1NSw5MiwxMjIsMC40NSk7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDkyLDEyMiwwLjEyKTt9CiAgICAudmVyZGljdC53YXJue2JvcmRlci1jb2xvcjogcmdiYSgyNTUsMTk0LDcxLDAuNDUpOyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwxOTQsNzEsMC4xMik7fQogICAgLnZlcmRpY3QgLmJpZ3tmb250LXNpemU6IDE0cHg7IGZvbnQtd2VpZ2h0OiA5MDA7fQogICAgLnZlcmRpY3QgLnNtYWxse2ZvbnQtc2l6ZTogMTFweDsgY29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsMC43OCk7IG1hcmdpbi10b3A6IDJweDt9CiAgICAuc3RhdHVze2ZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IDkwMDsgcGFkZGluZzogOHB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDk5OXB4OyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMTQpOyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDYpO30KICAgIC5zdGF0dXMuZ29vZHtib3JkZXItY29sb3I6IHJnYmEoNTYsMjA5LDEzOCwwLjU1KTsgY29sb3I6IHJnYmEoNTYsMjA5LDEzOCwwLjk1KTt9CiAgICAuc3RhdHVzLmJhZHtib3JkZXItY29sb3I6IHJnYmEoMjU1LDkyLDEyMiwwLjU1KTsgY29sb3I6IHJnYmEoMjU1LDkyLDEyMiwwLjk4KTt9CiAgICAuc3RhdHVzLndhcm57Ym9yZGVyLWNvbG9yOiByZ2JhKDI1NSwxOTQsNzEsMC41NSk7IGNvbG9yOiByZ2JhKDI1NSwxOTQsNzEsMC45OCk7fQogICAgLmZvb3Rub3Rle2ZvbnQtc2l6ZTogMTFweDsgY29sb3I6IHZhcigtLW11dGVkKTsgbGluZS1oZWlnaHQ6IDEuMzU7fQogICAgLmlvc2Jhcntwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6MDsgcmlnaHQ6MDsgYm90dG9tOjA7IHBhZGRpbmc6IDE0cHggMThweCBjYWxjKDE0cHggKyBlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSkpOyBiYWNrZ3JvdW5kOiByZ2JhKDUsOCwxNiwwLjg2KTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4xMCk7IGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTt9CiAgICAuaW9zYmFyIC5pbm5lcnttYXgtd2lkdGg6IDExMjBweDsgbWFyZ2luOjAgYXV0bzsgZGlzcGxheTpmbGV4OyBnYXA6MTBweDsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbjt9CiAgICAuaW9zYmFyIC5rcGlze2Rpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7IGFsaWduLWl0ZW1zOnN0cmV0Y2g7IGZsZXg6IDE7IG1pbi13aWR0aDogMDt9CiAgICAuaW9zYmFyIC5taW5pe2JvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4xMCk7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4wNCk7IGJvcmRlci1yYWRpdXM6IDE0cHg7IHBhZGRpbmc6IDEwcHggMTJweDsgbWluLXdpZHRoOiAwOyBmbGV4OiAxO30KICAgIC5pb3NiYXIgLm1pbmkgLmt7Zm9udC1zaXplOiAxMXB4OyBjb2xvcjogdmFyKC0tbXV0ZWQpOyBtYXJnaW4tYm90dG9tOiA0cHg7fQogICAgLmlvc2JhciAubWluaSAudntmb250LXNpemU6IDE1cHg7IGZvbnQtd2VpZ2h0OiA5MDA7IHdoaXRlLXNwYWNlOiBub3dyYXA7IG92ZXJmbG93OiBoaWRkZW47IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO30KICAgIC5pb3NiYXIgLm1pbmkgLnYuZ29vZHtjb2xvcjogcmdiYSg1NiwyMDksMTM4LDAuOTUpfQogICAgLmlvc2JhciAubWluaSAudi5iYWR7Y29sb3I6IHJnYmEoMjU1LDkyLDEyMiwwLjk4KX0KICAgIC5pb3NiYXIgLmFjdGlvbnN7ZGlzcGxheTpmbGV4OyBnYXA6MTBweDsgZmxleDogMCAwIGF1dG87fQogICAgLmlvc2JhciAuYnRue3BhZGRpbmc6IDEycHggMTRweDsgYm9yZGVyLXJhZGl1czogMTRweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDt9CiAgICBAbWVkaWEgKG1heC13aWR0aDogOTgwcHgpewogICAgICAuZ3JpZHtncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcn0KICAgICAgLmlvc2JhcntkaXNwbGF5OmJsb2NrfQogICAgICAud3JhcHtwYWRkaW5nLWJvdHRvbTogY2FsYygxNDBweCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tKSk7fQogICAgfQogIAo8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5Pgo8ZGl2IGNsYXNzPSJ3cmFwIj4KPGhlYWRlcj4KPGRpdiBjbGFzcz0iYnJhbmQiPgo8ZGl2IGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0iYmFkZ2UiPjwvZGl2Pgo8ZGl2Pgo8aDE+REE0MiBWSSDigJQgVGFrZW9mZiBQZXJmb3JtYW5jZTwvaDE+CjxkaXYgY2xhc3M9InN1YiI+SW50ZXJwb2xhdGlvbiArIGZhY3RldXJzIHZlbnQvcGlzdGUgKyBtYXJnZSBUT1JBIChNVE9NKTwvZGl2Pgo8L2Rpdj4KPC9kaXY+CjxkaXYgY2xhc3M9InRvcHJpZ2h0Ij4KPGRpdiBjbGFzcz0iY2hpcCI+VW5pdHM6IGt0IC8gZnQgLyDCsEMgLyBtPC9kaXY+CjxkaXYgY2xhc3M9ImNoaXAiPlRhYmxlczogTVRPTSAxOTk5IGtnPC9kaXY+CjwvZGl2Pgo8L2hlYWRlcj4KPGRpdiBjbGFzcz0iZ3JpZCI+CjwhLS0gTEVGVDogSW5wdXRzIC0tPgo8c2VjdGlvbiBjbGFzcz0iY2FyZCI+CjxkaXYgY2xhc3M9ImhlYWQiPgo8ZGl2Pgo8ZGl2IGNsYXNzPSJ0aXRsZTIiPklucHV0czwvZGl2Pgo8ZGl2IGNsYXNzPSJoaW50Ij5SZW5zZWlnbmUgbGVzIGNoYW1wcywgcHVpcyDigJxDb21wdXRl4oCdPC9kaXY+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJwaWxscm93Ij4KPGRpdiBjbGFzcz0icGlsbCI+Tm9ybWFsID0gRkxBUFMgVVA8L2Rpdj4KPGRpdiBjbGFzcz0icGlsbCI+U2hvcnQgPSBGTEFQUyBBUFA8L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJib2R5Ij4KPGRpdiBhcmlhLWxhYmVsPSJUYWtlb2ZmIGNvbmZpZ3VyYXRpb24gdGFicyIgY2xhc3M9InRhYnMiIHJvbGU9InRhYmxpc3QiPgo8ZGl2IGFyaWEtc2VsZWN0ZWQ9InRydWUiIGNsYXNzPSJ0YWIgYWN0aXZlIiBkYXRhLW1vZGU9Im5vcm1hbCIgcm9sZT0idGFiIj4KPGRpdj4KPGRpdiBjbGFzcz0ibGFiZWwiPk5vcm1hbCBUYWtlb2ZmPC9kaXY+CjxkaXYgY2xhc3M9Im1ldGEiPkZMQVBTIFVQPC9kaXY+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJtZXRhIj5NVE9NPC9kaXY+CjwvZGl2Pgo8ZGl2IGFyaWEtc2VsZWN0ZWQ9ImZhbHNlIiBjbGFzcz0idGFiIiBkYXRhLW1vZGU9InNob3J0IiByb2xlPSJ0YWIiPgo8ZGl2Pgo8ZGl2IGNsYXNzPSJsYWJlbCI+U2hvcnQgVGFrZW9mZjwvZGl2Pgo8ZGl2IGNsYXNzPSJtZXRhIj5GTEFQUyBBUFA8L2Rpdj4KPC9kaXY+CjxkaXYgY2xhc3M9Im1ldGEiPk1UT008L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8ZGl2IGFyaWEtbGFiZWw9IlByaW1hcnkgaW5wdXRzIiBjbGFzcz0iZm9ybWdyaWQiPgo8ZGl2IGNsYXNzPSJmaWVsZCI+CjxsYWJlbD5SdW53YXkgUUZVIDxzcGFuPsKwPC9zcGFuPjwvbGFiZWw+CjxpbnB1dCBpZD0icndxIiBpbnB1dG1vZGU9Im51bWVyaWMiIG1heD0iMzYwIiBtaW49IjAiIHBsYWNlaG9sZGVyPSJleDogMjcwIiB0eXBlPSJudW1iZXIiLz4KPC9kaXY+CjxkaXYgY2xhc3M9ImZpZWxkIj4KPGxhYmVsPlRPUkEgPHNwYW4+bTwvc3Bhbj48L2xhYmVsPgo8aW5wdXQgaWQ9InRvcmEiIGlucHV0bW9kZT0iZGVjaW1hbCIgbWluPSIwIiBwbGFjZWhvbGRlcj0iZXg6IDE4MDAiIHR5cGU9Im51bWJlciIvPgo8L2Rpdj4KPGRpdiBjbGFzcz0iZmllbGQiPgo8bGFiZWw+V2luZCBkaXJlY3Rpb24gPHNwYW4+wrA8L3NwYW4+PC9sYWJlbD4KPGlucHV0IGlkPSJ3ZGlyIiBpbnB1dG1vZGU9Im51bWVyaWMiIG1heD0iMzYwIiBtaW49IjAiIHBsYWNlaG9sZGVyPSJleDogMjQwIiB0eXBlPSJudW1iZXIiLz4KPC9kaXY+CjxkaXYgY2xhc3M9ImZpZWxkIj4KPGxhYmVsPldpbmQgc3BlZWQgPHNwYW4+a3Q8L3NwYW4+PC9sYWJlbD4KPGlucHV0IGlkPSJ3c3BkIiBpbnB1dG1vZGU9ImRlY2ltYWwiIG1pbj0iMCIgcGxhY2Vob2xkZXI9ImV4OiAxMiIgdHlwZT0ibnVtYmVyIi8+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJmaWVsZCI+CjxsYWJlbD5QcmVzc3VyZSBhbHRpdHVkZSA8c3Bhbj5mdDwvc3Bhbj48L2xhYmVsPgo8aW5wdXQgaWQ9InBhIiBpbnB1dG1vZGU9ImRlY2ltYWwiIHBsYWNlaG9sZGVyPSJleDogMTM1MCIgdHlwZT0ibnVtYmVyIi8+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJmaWVsZCI+CjxsYWJlbD5PQVQgPHNwYW4+wrBDPC9zcGFuPjwvbGFiZWw+CjxpbnB1dCBpZD0ib2F0IiBpbnB1dG1vZGU9ImRlY2ltYWwiIHBsYWNlaG9sZGVyPSJleDogMTgiIHR5cGU9Im51bWJlciIvPgo8L2Rpdj4KPGRpdiBjbGFzcz0iZmllbGQiIHN0eWxlPSJncmlkLWNvbHVtbjoxIC8gLTE7Ij4KPGxhYmVsPk91dHB1dCBtb2RlPC9sYWJlbD4KPHNlbGVjdCBpZD0ib3V0bW9kZSI+CjxvcHRpb24gdmFsdWU9IjUwIj5UYWtlb2ZmIGRpc3RhbmNlIG92ZXIgNTAgZnQ8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iZ3IiPkdyb3VuZCByb2xsPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9ImJvdGgiPkJvdGg8L29wdGlvbj4KPC9zZWxlY3Q+CjwvZGl2Pgo8L2Rpdj4KPGRpdiBjbGFzcz0ic2VjdGlvbnRpdGxlIj5SdW53YXkgLyBjb3JyZWN0aW9uczwvZGl2Pgo8ZGl2IGFyaWEtbGFiZWw9IlJ1bndheSBjb3JyZWN0aW9ucyBvcHRpb25zIiBjbGFzcz0ib3B0aW9ucyI+CjxsYWJlbCBjbGFzcz0ib3B0Ij4KPGlucHV0IGNoZWNrZWQ9IiIgbmFtZT0iZ3Jhc3NkcnkiIHR5cGU9InJhZGlvIiB2YWx1ZT0iMCIvPgo8ZGl2Pgo8ZGl2IGNsYXNzPSJ0Ij5QYXZlZCAvIG5vbmU8L2Rpdj4KPGRpdiBjbGFzcz0iZCI+Tm8gZ3Jhc3MgY29ycmVjdGlvbjwvZGl2Pgo8L2Rpdj4KPC9sYWJlbD4KPGxhYmVsIGNsYXNzPSJvcHQiPgo8aW5wdXQgbmFtZT0iZ3Jhc3NkcnkiIHR5cGU9InJhZGlvIiB2YWx1ZT0iMC4xMCIvPgo8ZGl2Pgo8ZGl2IGNsYXNzPSJ0Ij5HcmFzcyBydW53YXkg4oCUIGRyeSAoNSBjbSk8L2Rpdj4KPGRpdiBjbGFzcz0iZCI+KzEwJTwvZGl2Pgo8L2Rpdj4KPC9sYWJlbD4KPGxhYmVsIGNsYXNzPSJvcHQiPgo8aW5wdXQgbmFtZT0iZ3Jhc3NkcnkiIHR5cGU9InJhZGlvIiB2YWx1ZT0iMC4xNSIvPgo8ZGl2Pgo8ZGl2IGNsYXNzPSJ0Ij5HcmFzcyBydW53YXkg4oCUIGRyeSAoNeKAkzEwIGNtKTwvZGl2Pgo8ZGl2IGNsYXNzPSJkIj4rMTUlPC9kaXY+CjwvZGl2Pgo8L2xhYmVsPgo8bGFiZWwgY2xhc3M9Im9wdCI+CjxpbnB1dCBuYW1lPSJncmFzc2RyeSIgdHlwZT0icmFkaW8iIHZhbHVlPSIwLjI1Ii8+CjxkaXY+CjxkaXYgY2xhc3M9InQiPkdyYXNzIHJ1bndheSDigJQgZHJ5ICgyNSBjbSk8L2Rpdj4KPGRpdiBjbGFzcz0iZCI+KzI1JTwvZGl2Pgo8L2Rpdj4KPC9sYWJlbD4KPGxhYmVsIGNsYXNzPSJvcHQiPgo8aW5wdXQgbmFtZT0iZ3Jhc3NkcnkiIHR5cGU9InJhZGlvIiB2YWx1ZT0iTk8iLz4KPGRpdj4KPGRpdiBjbGFzcz0idCI+R3Jhc3MgcnVud2F5IOKAlCAmZ3Q7IDI1IGNtPC9kaXY+CjxkaXYgY2xhc3M9ImQiPlRha2Utb2ZmIHNob3VsZCBub3QgYmUgYXR0ZW1wdGVkPC9kaXY+CjwvZGl2Pgo8L2xhYmVsPgo8bGFiZWwgY2xhc3M9Im9wdCI+CjxpbnB1dCBpZD0iZ3Jhc3N3ZXQiIHR5cGU9ImNoZWNrYm94Ii8+CjxkaXY+CjxkaXYgY2xhc3M9InQiPkdyYXNzIHJ1bndheSDigJQgd2V0PC9kaXY+CjxkaXYgY2xhc3M9ImQiPisxMCUgKGVuIHBsdXMgZHUgY2FsY3VsIOKAnGRyeSBncmFzc+KAnSk8L2Rpdj4KPC9kaXY+CjwvbGFiZWw+CjxsYWJlbCBjbGFzcz0ib3B0Ij4KPGlucHV0IGlkPSJzb2Z0IiB0eXBlPSJjaGVja2JveCIvPgo8ZGl2Pgo8ZGl2IGNsYXNzPSJ0Ij5Tb2Z0IGdyb3VuZDwvZGl2Pgo8ZGl2IGNsYXNzPSJkIj4rNDUlIChlbiBwbHVzIHNpIGFwcGxpY2FibGUpPC9kaXY+CjwvZGl2Pgo8L2xhYmVsPgo8L2Rpdj4KPGRpdiBjbGFzcz0iZGl2aWRlciI+PC9kaXY+CjxkaXYgY2xhc3M9InJvdyI+CjxkaXYgY2xhc3M9ImZpZWxkIj4KPGxhYmVsPlVwaGlsbCBzbG9wZSA8c3Bhbj4lPC9zcGFuPjwvbGFiZWw+CjxpbnB1dCBpZD0ic2xvcGUiIGlucHV0bW9kZT0iZGVjaW1hbCIgbWluPSIwIiBwbGFjZWhvbGRlcj0iZXg6IDEuNSIgdHlwZT0ibnVtYmVyIi8+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJmaWVsZCI+CjxsYWJlbD5UYWJsZSB3ZWlnaHQ8L2xhYmVsPgo8c2VsZWN0IGlkPSJ3ZWlnaHQiIHRpdGxlPSJPcHRpb25uZWwgc2kgdG9uIGF2aW9uIGVzdCBlbiBNVE9NIDE5MDAga2cuIj4KPG9wdGlvbiBzZWxlY3RlZD0iIiB2YWx1ZT0iMTk5OSI+MTk5OSBrZyAoTVRPTSBvcHRpb24pPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9IjE5MDAiPjE5MDAga2c8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iMTcwMCI+MTcwMCBrZzwvb3B0aW9uPgo8L3NlbGVjdD4KPC9kaXY+CjwvZGl2Pgo8ZGl2IGFyaWEtbGFiZWw9IkFjdGlvbiBidXR0b25zIiBjbGFzcz0iYnRucm93Ij4KPGJ1dHRvbiBjbGFzcz0iYnRuIHByaW1hcnkiIGlkPSJjb21wdXRlIj5Db21wdXRlPC9idXR0b24+CjxidXR0b24gY2xhc3M9ImJ0biIgaWQ9InJlc2V0IiB0eXBlPSJidXR0b24iPlJlc2V0PC9idXR0b24+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJhbGVydCIgaWQ9ImFsZXJ0Ij48L2Rpdj4KPGRpdiBjbGFzcz0iZm9vdG5vdGUiPgogICAgICAgICAgICBJbnRlcnBvbGF0aW9uIGJpbGluw6lhaXJlIFBBw5dPQVQgc3VyIGxlcyB0YWJsZXMuIFNpIHVuZSB6b25lIGVzdCDigJxub24gcHVibGnDqWXigJ0gKGNlbGx1bGVzIG5vaXJlcy9kaWFnb25hbGVzKSwKICAgICAgICAgICAgbOKAmW91dGlsIHJlbnZvaWUg4oCcTi9B4oCdIGV0IGFmZmljaGUgdW4gd2FybmluZy4KICAgICAgICAgIDwvZGl2Pgo8L2Rpdj4KPC9zZWN0aW9uPgo8IS0tIFJJR0hUOiBSZXN1bHRzIC0tPgo8YXNpZGUgY2xhc3M9ImNhcmQiPgo8ZGl2IGNsYXNzPSJoZWFkIj4KPGRpdj4KPGRpdiBjbGFzcz0idGl0bGUyIj5SZXN1bHRzPC9kaXY+CjxkaXYgY2xhc3M9ImhpbnQiPlZlbnQgY29tcG9zYW50ZSArIGRpc3RhbmNlcyBjb3JyaWfDqWVzICsgbWFyZ2U8L2Rpdj4KPC9kaXY+CjxkaXYgY2xhc3M9InBpbGxyb3ciPgo8ZGl2IGNsYXNzPSJwaWxsIG1vbm8iIGlkPSJtb2RlcGlsbCI+TW9kZTogTm9ybWFsPC9kaXY+CjwvZGl2Pgo8L2Rpdj4KPGRpdiBjbGFzcz0iYm9keSI+CjxkaXYgY2xhc3M9InJlc3VsdHMiPgo8ZGl2IGNsYXNzPSJrcGkiPgo8ZGl2IGNsYXNzPSJrIj5IZWFkd2luZCAvIFRhaWx3aW5kPC9kaXY+CjxkaXYgY2xhc3M9InYgbW9ubyIgaWQ9Imh3Ij5IVyAwLjAga3Q8L2Rpdj4KPGRpdiBjbGFzcz0icyBtb25vIiBpZD0iaHdkZXNjIj7OlCA9IDDCsCDCtyB3aW5kIGZhY3RvciA9IDEuMDAwPC9kaXY+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJrcGkiPgo8ZGl2IGNsYXNzPSJrIj5Dcm9zc3dpbmQ8L2Rpdj4KPGRpdiBjbGFzcz0idiBtb25vIiBpZD0ieHciPjAuMCBrdDwvZGl2Pgo8ZGl2IGNsYXNzPSJzIG1vbm8iIGlkPSJ4d2Rlc2MiPmZyb20gcmlnaHQgwrcgc2lnbmVkIDAuMCBrdDwvZGl2Pgo8L2Rpdj4KPGRpdiBjbGFzcz0ia3BpIj4KPGRpdiBjbGFzcz0iayI+Q29ycmVjdGVkIGRpc3RhbmNlPC9kaXY+CjxkaXYgY2xhc3M9InYgbW9ubyIgaWQ9ImRpc3QiPjczMCBtPC9kaXY+CjxkaXYgY2xhc3M9InMgbW9ubyIgaWQ9ImRpc3RkZXNjIj5Vc2luZyA1MCBmdCBkaXN0YW5jZSDCtyBydW53YXkgZmFjdG9yID0gMS4wMDA8L2Rpdj4KPC9kaXY+CjxkaXYgY2xhc3M9ImtwaSI+CjxkaXYgY2xhc3M9ImsiPlRPUkEgbWFyZ2luPC9kaXY+CjxkaXYgY2xhc3M9InYgbW9ubyIgaWQ9Im1hcmdpbiI+MTA3MCBtPC9kaXY+CjxkaXYgY2xhc3M9InMgbW9ubyIgaWQ9Im1hcmdpbmRlc2MiPlRPUkEgMTgwMCDiiJIgRElTVCA3MzA8L2Rpdj4KPC9kaXY+CjxkaXYgY2xhc3M9InZlcmRpY3QgZ29vZCIgaWQ9InZlcmRpY3QiPgo8ZGl2IGNsYXNzPSJsZWZ0Ij4KPGRpdiBjbGFzcz0iYmlnIG1vbm8iIGlkPSJ2ZXJkaWN0VGV4dCI+VmVyZGljdDogT0s8L2Rpdj4KPGRpdiBjbGFzcz0ic21hbGwiIGlkPSJ2ZXJkaWN0U3ViIj5Qb3NpdGl2ZSBtYXJnaW46IDEwNzAgbTwvZGl2Pgo8L2Rpdj4KPGRpdiBjbGFzcz0ic3RhdHVzIGdvb2QiIGlkPSJzdGF0dXMiPk1BUkdJTjwvZGl2Pgo8L2Rpdj4KPC9kaXY+CjxkaXYgY2xhc3M9ImRpdmlkZXIiPjwvZGl2Pgo8ZGl2IGNsYXNzPSJzZWN0aW9udGl0bGUiPkRldGFpbHM8L2Rpdj4KPGRpdiBjbGFzcz0iZm9vdG5vdGUgbW9ubyIgaWQ9ImRldGFpbHMiPk1vZGU9bm9ybWFsIMK3IFRhYmxlIHdlaWdodD0xOTk5IGtnClBBPTAgZnQgwrcgT0FUPTAuMMKwQwpCYXNlIChpbnRlcnBvbGF0ZWQpOiBHUj00MDAuMCBtIMK3IDUwZnQ9NzMwLjAgbQpGYWN0b3JzOiB3aW5kPTEuMDAwIMK3IHJ1bndheT0xLjAwMCDCtyB0b3RhbD0xLjAwMDwvZGl2Pgo8L2Rpdj4KPC9hc2lkZT4KPC9kaXY+CjwvZGl2Pgo8c2NyaXB0PgovKioKICogVGFibGVzIGVuY29kw6llcyBkZXB1aXMgbGVzIHBhZ2VzIFRha2UtT2ZmIChNVE9NIDE5OTkgLyAxOTAwIC8gMTcwMCkgOgogKiAtIE5vcm1hbCBQcm9jZWR1cmUgKEZMQVBTIFVQKQogKiAtIFNob3J0IEZpZWxkIFByb2NlZHVyZSAoRkxBUFMgQVBQKQogKgogKiBHcmlsbGU6CiAqICBBTFRfZnQgPSBbMCwxMDAwLC4uLiwxMDAwMF0KICogIE9BVF9DICA9IFswLDEwLDIwLDMwLDQwLDUwXQogKiBWYWxldXJzIGVuIG3DqHRyZXMgKG0pLgogKiBMZXMgY2VsbHVsZXMg4oCcbm9uIHB1Ymxpw6llc+KAnSBzb250IG51bGwuCiAqLwpjb25zdCBHUklEX0FMVCA9IFswLDEwMDAsMjAwMCwzMDAwLDQwMDAsNTAwMCw2MDAwLDcwMDAsODAwMCw5MDAwLDEwMDAwXTsKY29uc3QgR1JJRF9PQVQgPSBbMCwxMCwyMCwzMCw0MCw1MF07CgovLyBIZWxwZXIgdG8gY3JlYXRlIDJEIGFycmF5cyBmcm9tIHJvdyBsaXN0cwpmdW5jdGlvbiBBKHJvd3MpeyByZXR1cm4gcm93czsgfQoKY29uc3QgVEFCTEVTID0gewogIC8vIFdlaWdodDogMTk5OSBrZwogICIxOTk5IjogewogICAgbm9ybWFsOiB7CiAgICAgIGdyOiBBKFsKICAgICAgICBbNDAwLDQyMCw0NDAsNDcwLDU2MCw2ODBdLAogICAgICAgIFs0MjAsNDQwLDQ3MCw1MTAsNjEwLDczMF0sCiAgICAgICAgWzQ0MCw0NjAsNTAwLDU0MCw2NjAsNzkwXSwKICAgICAgICBbNDYwLDQ5MCw1MjAsNTkwLDcxMCw4NjBdLAogICAgICAgIFs0OTAsNTIwLDU2MCw2NDAsNzgwLDkzMF0sCiAgICAgICAgWzUyMCw1NTAsNjAwLDY5MCw4NDAsbnVsbF0sCiAgICAgICAgWzU1MCw1ODAsNjQwLDc2MCw5MjAsbnVsbF0sCiAgICAgICAgWzU4MCw2MjAsNjgwLDgyMCw5OTAsbnVsbF0sCiAgICAgICAgWzYyMCw2NjAsNzMwLDkwMCwxMDgwLG51bGxdLAogICAgICAgIFs2NjAsNzEwLDgwMCw5ODAsMTE4MCxudWxsXSwKICAgICAgICBbNzAwLDc3MCw5MDAsMTEwMCxudWxsLG51bGxdLAogICAgICBdKSwKICAgICAgZDUwOiBBKFsKICAgICAgICBbNzMwLDc2MCw3OTAsODcwLDEwNTAsMTMzMF0sCiAgICAgICAgWzc2MCw4MDAsODQwLDkzMCwxMTUwLDE0NTBdLAogICAgICAgIFs4MDAsODQwLDg5MCwxMDAwLDEyNjAsMTU3MF0sCiAgICAgICAgWzg0MCw4ODAsOTQwLDEwODAsMTM2MCwxNzEwXSwKICAgICAgICBbODgwLDkyMCwxMDAwLDExNzAsMTQ5MCwxODUwXSwKICAgICAgICBbOTIwLDk4MCwxMDcwLDEyODAsMTYyMCxudWxsXSwKICAgICAgICBbOTcwLDEwMzAsMTE0MCwxNDAwLDE3NjAsbnVsbF0sCiAgICAgICAgWzEwMzAsMTEwMCwxMjIwLDE1MzAsMTkxMCxudWxsXSwKICAgICAgICBbMTA5MCwxMTcwLDEzMjAsMTY2MCwyMDgwLG51bGxdLAogICAgICAgIFsxMTUwLDEyNDAsMTQ1MCwxODQwLDIyODAsbnVsbF0sCiAgICAgICAgWzEyMzAsMTM2MCwxNjQwLDIxMTAsbnVsbCxudWxsXSwKICAgICAgXSkKICAgIH0sCiAgICBzaG9ydDogewogICAgICBncjogQShbCiAgICAgICAgWzM1MCwzNzAsMzkwLDQyMCw1MDAsNjEwXSwKICAgICAgICBbMzcwLDM5MCw0MTAsNDUwLDU0MCw2NjBdLAogICAgICAgIFszOTAsNDEwLDQ0MCw0OTAsNTkwLDcyMF0sCiAgICAgICAgWzQxMCw0NDAsNDcwLDUzMCw2NTAsNzkwXSwKICAgICAgICBbNDQwLDQ2MCw1MDAsNTgwLDcxMCw4NjBdLAogICAgICAgIFs0NzAsNDkwLDU0MCw2MzAsNzgwLG51bGxdLAogICAgICAgIFs1MDAsNTMwLDU4MCw2OTAsODUwLG51bGxdLAogICAgICAgIFs1MzAsNTYwLDYyMCw3NjAsOTMwLG51bGxdLAogICAgICAgIFs1NjAsNjAwLDY3MCw4MzAsMTAxMCxudWxsXSwKICAgICAgICBbNjAwLDY1MCw3NDAsOTIwLDExMjAsbnVsbF0sCiAgICAgICAgWzY1MCw3MTAsODQwLDEwNDAsbnVsbCxudWxsXSwKICAgICAgXSksCiAgICAgIGQ1MDogQShbCiAgICAgICAgWzYwMCw2NDAsNjcwLDczMCw4OTAsMTEyMF0sCiAgICAgICAgWzY0MCw2NzAsNzEwLDc5MCw5ODAsMTIzMF0sCiAgICAgICAgWzY3MCw3MTAsNzYwLDg1MCwxMDgwLDEzNjBdLAogICAgICAgIFs3MTAsNzUwLDgxMCw5MzAsMTE4MCwxNTAwXSwKICAgICAgICBbNzUwLDc5MCw4NzAsMTAyMCwxMzAwLDE2NDBdLAogICAgICAgIFs3OTAsODQwLDkzMCwxMTMwLDE0NDAsbnVsbF0sCiAgICAgICAgWzg0MCw5MDAsMTAwMCwxMjQwLDE1OTAsbnVsbF0sCiAgICAgICAgWzkwMCw5NjAsMTA4MCwxMzgwLDE3NTAsbnVsbF0sCiAgICAgICAgWzk1MCwxMDMwLDExODAsMTUyMCwxOTQwLG51bGxdLAogICAgICAgIFsxMDIwLDExMTAsMTMyMCwxNzEwLDIyMDAsbnVsbF0sCiAgICAgICAgWzExMDAsMTIzMCwxNTIwLDIwMTAsbnVsbCxudWxsXSwKICAgICAgXSkKICAgIH0KICB9LAoKICAvLyBXZWlnaHQ6IDE5MDAga2cgKGZyb20gcGFnZSAxODgvPz8gc2hvcnQgYW5kIHBhZ2UgMTg1IG5vcm1hbCkg4oCUIGVuY29kZWQgdG8gbWF0Y2ggVUkgZHJvcGRvd24KICAiMTkwMCI6IHsKICAgIG5vcm1hbDogewogICAgICBncjogQShbCiAgICAgICAgWzM3MCwzOTAsNDEwLDQ1MCw1MjAsNjQwXSwKICAgICAgICBbMzkwLDQxMCw0NDAsNDgwLDU3MCw2OTBdLAogICAgICAgIFs0MjAsNDQwLDQ3MCw1MTAsNjIwLDc1MF0sCiAgICAgICAgWzQ0MCw0NjAsNDkwLDU1MCw2NzAsODEwXSwKICAgICAgICBbNDYwLDQ5MCw1MzAsNjAwLDczMCw4ODBdLAogICAgICAgIFs0OTAsNTIwLDU2MCw2NTAsNzkwLG51bGxdLAogICAgICAgIFs1MjAsNTUwLDYwMCw3MTAsODYwLG51bGxdLAogICAgICAgIFs1NTAsNTkwLDY0MCw3ODAsOTMwLG51bGxdLAogICAgICAgIFs1ODAsNjIwLDY5MCw4NDAsMTAxMCxudWxsXSwKICAgICAgICBbNjIwLDY3MCw3NjAsOTIwLDExMTAsbnVsbF0sCiAgICAgICAgWzY2MCw3MjAsODQwLDEwMzAsbnVsbCxudWxsXSwKICAgICAgXSksCiAgICAgIGQ1MDogQShbCiAgICAgICAgWzY3MCw3MTAsNzMwLDgwMCw5NjAsMTIxMF0sCiAgICAgICAgWzcxMCw3NDAsNzgwLDg2MCwxMDYwLDEzMTBdLAogICAgICAgIFs3NDAsNzcwLDgyMCw5MjAsMTE1MCwxNDIwXSwKICAgICAgICBbNzcwLDgxMCw4NzAsOTkwLDEyNTAsMTU1MF0sCiAgICAgICAgWzgxMCw4NTAsOTIwLDEwODAsMTM1MCwxNjcwXSwKICAgICAgICBbODUwLDkwMCw5OTAsMTE4MCwxNDcwLG51bGxdLAogICAgICAgIFs5MDAsOTUwLDEwNTAsMTI4MCwxNjAwLG51bGxdLAogICAgICAgIFs5NTAsMTAxMCwxMTMwLDE0MDAsMTc0MCxudWxsXSwKICAgICAgICBbMTAwMCwxMDgwLDEyMTAsMTUyMCwxODgwLG51bGxdLAogICAgICAgIFsxMDYwLDExNTAsMTMzMCwxNjgwLDIwOTAsbnVsbF0sCiAgICAgICAgWzExNDAsMTI1MCwxNTAwLDE5MTAsbnVsbCxudWxsXSwKICAgICAgXSkKICAgIH0sCiAgICBzaG9ydDogewogICAgICBncjogQShbCiAgICAgICAgWzMzMCwzNTAsMzcwLDQwMCw0NzAsNTcwXSwKICAgICAgICBbMzUwLDM3MCwzOTAsNDMwLDUxMCw2MzBdLAogICAgICAgIFszNzAsMzkwLDQyMCw0NjAsNTYwLDY4MF0sCiAgICAgICAgWzM5MCw0MTAsNDQwLDUwMCw2MTAsNzQwXSwKICAgICAgICBbNDEwLDQ0MCw0NzAsNTQwLDY3MCw4MTBdLAogICAgICAgIFs0NDAsNDcwLDUxMCw2MDAsNzMwLG51bGxdLAogICAgICAgIFs0NzAsNTAwLDU0MCw2NTAsODAwLG51bGxdLAogICAgICAgIFs1MDAsNTMwLDU5MCw3MjAsODcwLG51bGxdLAogICAgICAgIFs1MzAsNTcwLDY0MCw3ODAsOTUwLG51bGxdLAogICAgICAgIFs1NzAsNjEwLDcwMCw4NjAsMTA1MCxudWxsXSwKICAgICAgICBbNjEwLDY3MCw3OTAsOTgwLG51bGwsbnVsbF0sCiAgICAgIF0pLAogICAgICBkNTA6IEEoWwogICAgICAgIFs1NjAsNTkwLDYyMCw2ODAsODIwLDEwMzBdLAogICAgICAgIFs1OTAsNjIwLDY2MCw3MzAsOTAwLDExMzBdLAogICAgICAgIFs2MjAsNjYwLDcwMCw3OTAsOTkwLDEyNDBdLAogICAgICAgIFs2NjAsNjkwLDc1MCw4NjAsMTA5MCwxMzYwXSwKICAgICAgICBbNzAwLDc0MCw4MDAsOTQwLDExOTAsMTQ5MF0sCiAgICAgICAgWzc0MCw3ODAsODYwLDEwNDAsMTMxMCxudWxsXSwKICAgICAgICBbNzgwLDg0MCw5MzAsMTE0MCwxNDQwLG51bGxdLAogICAgICAgIFs4MzAsODkwLDEwMDAsMTI2MCwxNTkwLG51bGxdLAogICAgICAgIFs4OTAsOTYwLDEwOTAsMTM5MCwxNzUwLG51bGxdLAogICAgICAgIFs5NTAsMTAzMCwxMjEwLDE1NTAsMTk4MCxudWxsXSwKICAgICAgICBbMTAyMCwxMTQwLDEzODAsMTgxMCxudWxsLG51bGxdLAogICAgICBdKQogICAgfQogIH0sCgogIC8vIFdlaWdodDogMTcwMCBrZyAodGFibGVzKQogICIxNzAwIjogewogICAgbm9ybWFsOiB7CiAgICAgIGdyOiBBKFsKICAgICAgICBbMzMwLDM1MCwzNjAsMzkwLDQ2MCw1NjBdLAogICAgICAgIFszNTAsMzYwLDM5MCw0MjAsNTAwLDYwMF0sCiAgICAgICAgWzM3MCwzOTAsNDEwLDQ1MCw1NDAsNjUwXSwKICAgICAgICBbMzkwLDQxMCw0NDAsNDgwLDU5MCw3MTBdLAogICAgICAgIFs0MTAsNDMwLDQ2MCw1MzAsNjQwLDc3MF0sCiAgICAgICAgWzQzMCw0NjAsNDkwLDU4MCw3MDAsbnVsbF0sCiAgICAgICAgWzQ2MCw0OTAsNTMwLDYzMCw3NjAsbnVsbF0sCiAgICAgICAgWzQ4MCw1MjAsNTYwLDY4MCw4MjAsbnVsbF0sCiAgICAgICAgWzUyMCw1NTAsNjEwLDc0MCw4OTAsbnVsbF0sCiAgICAgICAgWzU1MCw1OTAsNjcwLDgxMCw5NzAsbnVsbF0sCiAgICAgICAgWzU5MCw2NDAsNzQwLDkxMCxudWxsLG51bGxdLAogICAgICBdKSwKICAgICAgZDUwOiBBKFsKICAgICAgICBbNTgwLDYwMCw2MzAsNjgwLDgxMCwxMDEwXSwKICAgICAgICBbNTk4LDYzMCw2NzAsNzMwLDg5MCwxMTAwXSwKICAgICAgICBbNjMwLDY2MCw3MDAsNzgwLDk3MCwxMTkwXSwKICAgICAgICBbNjYwLDcwMCw3NDAsODQwLDEwNTAsMTI5MF0sCiAgICAgICAgWzcwMCw3MzAsNzkwLDkxMCwxMTQwLDEzOTBdLAogICAgICAgIFs3MzAsNzcwLDg0MCwxMDAwLDEyNDAsbnVsbF0sCiAgICAgICAgWzc3MCw4MjAsOTAwLDEwOTAsMTM0MCxudWxsXSwKICAgICAgICBbODEwLDg3MCw5NjAsMTE4MCwxNDUwLG51bGxdLAogICAgICAgIFs4NjAsOTIwLDEwMzAsMTI5MCwxNTcwLG51bGxdLAogICAgICAgIFs5MTAsOTgwLDExMzAsMTQxMCwxNzQwLG51bGxdLAogICAgICAgIFs5ODAsMTA3MCwxMjcwLDE2MDAsbnVsbCxudWxsXSwKICAgICAgXSkKICAgIH0sCiAgICBzaG9ydDogewogICAgICBncjogQShbCiAgICAgICAgWzI5MCwzMTAsMzIwLDM1MCw0MTAsNTAwXSwKICAgICAgICBbMzEwLDMyMCwzNDAsMzgwLDQ1MCw1NTBdLAogICAgICAgIFszMzAsMzUwLDM3MCw0MTAsNDkwLDYwMF0sCiAgICAgICAgWzM1MCwzNjAsMzkwLDQ0MCw1NDAsNjUwXSwKICAgICAgICBbMzcwLDM5MCw0MjAsNDgwLDU5MCw3MTBdLAogICAgICAgIFszOTAsNDEwLDQ1MCw1MjAsNjQwLG51bGxdLAogICAgICAgIFs0MTAsNDQwLDQ4MCw1ODAsNzAwLG51bGxdLAogICAgICAgIFs0NDAsNDcwLDUyMCw2MzAsNzcwLG51bGxdLAogICAgICAgIFs0NzAsNTAwLDU2MCw2OTAsODQwLG51bGxdLAogICAgICAgIFs1MDAsNTQwLDYyMCw3NjAsOTMwLG51bGxdLAogICAgICAgIFs1NDAsNTkwLDY5MCw4NjAsbnVsbCxudWxsXSwKICAgICAgXSksCiAgICAgIGQ1MDogQShbCiAgICAgICAgWzQ5MCw1MTAsNTQwLDU5MCw3MDAsODcwXSwKICAgICAgICBbNTEwLDU0MCw1NzAsNjMwLDc3MCw5NTBdLAogICAgICAgIFs1NDAsNTcwLDYxMCw2ODAsODQwLDEwNDBdLAogICAgICAgIFs1NzAsNjAwLDY1MCw3MzAsOTIwLDExNDBdLAogICAgICAgIFs2MDAsNjQwLDY5MCw4MTAsMTAxMCwxMjUwXSwKICAgICAgICBbNjQwLDY4MCw3NDAsODgwLDExMDAsbnVsbF0sCiAgICAgICAgWzY4MCw3MjAsODAwLDk3MCwxMjEwLG51bGxdLAogICAgICAgIFs3MjAsNzcwLDg2MCwxMDcwLDEzMzAsbnVsbF0sCiAgICAgICAgWzc2MCw4MjAsOTMwLDExNzAsMTQ2MCxudWxsXSwKICAgICAgICBbODIwLDg4MCwxMDMwLDEzMDAsMTYzMCxudWxsXSwKICAgICAgICBbODgwLDk3MCwxMTcwLDE1MDAsbnVsbCxudWxsXSwKICAgICAgXSkKICAgIH0KICB9Cn07CgpmdW5jdGlvbiBjbGFtcCh2LCBsbywgaGkpeyByZXR1cm4gTWF0aC5taW4oaGksIE1hdGgubWF4KGxvLCB2KSk7IH0KCmZ1bmN0aW9uIG5vcm1hbGl6ZURlZyhkKXsKICBsZXQgeCA9IGQgJSAzNjA7CiAgaWYgKHggPCAwKSB4ICs9IDM2MDsKICByZXR1cm4geDsKfQpmdW5jdGlvbiB3cmFwMTgwKGQpewogIGxldCB4ID0gKChkICsgMTgwKSAlIDM2MCkgLSAxODA7CiAgaWYgKHggPCAtMTgwKSB4ICs9IDM2MDsKICByZXR1cm4geDsKfQoKZnVuY3Rpb24gZm10TnVtKHgsIGRpZ2l0cz0wKXsKICBpZiAoeCA9PT0gbnVsbCB8fCB4ID09PSB1bmRlZmluZWQgfHwgTnVtYmVyLmlzTmFOKHgpKSByZXR1cm4gIk4vQSI7CiAgcmV0dXJuIHgudG9GaXhlZChkaWdpdHMpOwp9CgovKioKICogQmlsaW5lYXIgaW50ZXJwb2xhdGlvbiBvbiBncmlkIHdpdGggcG9zc2libGUgbnVsbCBjZWxscy4KICogUmV0dXJucyB7dmFsdWUsIG5vdGV9CiAqLwpmdW5jdGlvbiBiaWxpbmVhcihncmlkLCB4VmFscywgeVZhbHMsIHgsIHkpewogIC8vIHggPSBQQSwgeSA9IE9BVAogIGNvbnN0IG5vdGUgPSBbXTsKICAvLyBjbGFtcCB3aXRoaW4gYm91bmRzIGJ1dCBub3RlCiAgY29uc3QgeDAgPSB4VmFsc1swXSwgeE4gPSB4VmFsc1t4VmFscy5sZW5ndGgtMV07CiAgY29uc3QgeTAgPSB5VmFsc1swXSwgeU4gPSB5VmFsc1t5VmFscy5sZW5ndGgtMV07CgogIGxldCB4YyA9IHgsIHljID0geTsKICBpZiAoeCA8IHgwKXsgeGMgPSB4MDsgbm90ZS5wdXNoKCJQQSBiZWxvdyB0YWJsZSDihpIgY2xhbXBlZCB0byBTTCIpOyB9CiAgaWYgKHggPiB4Til7IHhjID0geE47IG5vdGUucHVzaCgiUEEgYWJvdmUgdGFibGUg4oaSIGNsYW1wZWQgdG8gMTAwMDAgZnQiKTsgfQogIGlmICh5IDwgeTApeyB5YyA9IHkwOyBub3RlLnB1c2goIk9BVCBiZWxvdyB0YWJsZSDihpIgY2xhbXBlZCB0byAwwrBDIik7IH0KICBpZiAoeSA+IHlOKXsgeWMgPSB5Tjsgbm90ZS5wdXNoKCJPQVQgYWJvdmUgdGFibGUg4oaSIGNsYW1wZWQgdG8gNTDCsEMgKGNhdXRpb24pIik7IH0KCiAgLy8gZmluZCBicmFja2V0aW5nIGluZGljZXMKICBmdW5jdGlvbiBicmFja2V0KHZhbHMsIHYpewogICAgZm9yIChsZXQgaT0wO2k8dmFscy5sZW5ndGgtMTtpKyspewogICAgICBpZiAodiA+PSB2YWxzW2ldICYmIHYgPD0gdmFsc1tpKzFdKSByZXR1cm4gW2ksIGkrMV07CiAgICB9CiAgICByZXR1cm4gW3ZhbHMubGVuZ3RoLTIsIHZhbHMubGVuZ3RoLTFdOyAvLyBlZGdlCiAgfQogIGNvbnN0IFtpeDAsIGl4MV0gPSBicmFja2V0KHhWYWxzLCB4Yyk7CiAgY29uc3QgW2l5MCwgaXkxXSA9IGJyYWNrZXQoeVZhbHMsIHljKTsKCiAgY29uc3QgeEE9eFZhbHNbaXgwXSwgeEI9eFZhbHNbaXgxXTsKICBjb25zdCB5QT15VmFsc1tpeTBdLCB5Qj15VmFsc1tpeTFdOwogIGNvbnN0IHR4ID0gKHhCPT09eEEpPzA6KCAoeGMteEEpLyh4Qi14QSkgKTsKICBjb25zdCB0eSA9ICh5Qj09PXlBKT8wOiggKHljLXlBKS8oeUIteUEpICk7CgogIGNvbnN0IFExMSA9IGdyaWRbaXgwXVtpeTBdOwogIGNvbnN0IFEyMSA9IGdyaWRbaXgxXVtpeTBdOwogIGNvbnN0IFExMiA9IGdyaWRbaXgwXVtpeTFdOwogIGNvbnN0IFEyMiA9IGdyaWRbaXgxXVtpeTFdOwoKICAvLyBJZiBhbnkgY29ybmVyIG51bGwsIHRyeSBkZWdyYWRlIHRvIDFEIGlmIHBvc3NpYmxlCiAgY29uc3QgY29ybmVycyA9IFtRMTEsUTIxLFExMixRMjJdOwogIGNvbnN0IGFsbE9rID0gY29ybmVycy5ldmVyeSh2ID0+IHYgIT09IG51bGwgJiYgdiAhPT0gdW5kZWZpbmVkKTsKICBpZiAoIWFsbE9rKXsKICAgIC8vIFRyeSBpbnRlcnBvbGF0ZSBhbG9uZyB5IGF0IGl4MCBpZiBib3RoIGV4aXN0CiAgICBjb25zdCBnMGEgPSBRMTEsIGcwYiA9IFExMjsKICAgIGNvbnN0IGcxYSA9IFEyMSwgZzFiID0gUTIyOwoKICAgIGZ1bmN0aW9uIGxlcnAoYSxiLHQpeyByZXR1cm4gYSArIChiLWEpKnQ7IH0KCiAgICAvLyBJZiB4IGV4YWN0bHkgb24gYSBncmlkIGxpbmUsIGRvIDFEIGFsb25nIHkKICAgIGlmIChpeDAgPT09IGl4MSB8fCB4QSA9PT0geEIpewogICAgICBpZiAoZzBhIT1udWxsICYmIGcwYiE9bnVsbCkgcmV0dXJuIHt2YWx1ZTogbGVycChnMGEsZzBiLHR5KSwgbm90ZTogbm90ZS5jb25jYXQoWyJNaXNzaW5nIGNlbGxzIOKGkiAxRCBpbnRlcnBvbGF0aW9uIChPQVQpIl0pfTsKICAgICAgcmV0dXJuIHt2YWx1ZTogbnVsbCwgbm90ZTogbm90ZS5jb25jYXQoWyJSZXF1ZXN0ZWQgcG9pbnQgZmFsbHMgaW50byBub24tcHVibGlzaGVkIGFyZWEiXSl9OwogICAgfQogICAgLy8gSWYgeSBleGFjdGx5IG9uIGdyaWQgbGluZSwgZG8gMUQgYWxvbmcgeAogICAgaWYgKGl5MCA9PT0gaXkxIHx8IHlBID09PSB5Qil7CiAgICAgIGlmIChRMTEhPW51bGwgJiYgUTIxIT1udWxsKSByZXR1cm4ge3ZhbHVlOiBsZXJwKFExMSxRMjEsdHgpLCBub3RlOiBub3RlLmNvbmNhdChbIk1pc3NpbmcgY2VsbHMg4oaSIDFEIGludGVycG9sYXRpb24gKFBBKSJdKX07CiAgICAgIHJldHVybiB7dmFsdWU6IG51bGwsIG5vdGU6IG5vdGUuY29uY2F0KFsiUmVxdWVzdGVkIHBvaW50IGZhbGxzIGludG8gbm9uLXB1Ymxpc2hlZCBhcmVhIl0pfTsKICAgIH0KCiAgICAvLyBUcnk6IGNvbXB1dGUgaW50ZXJwb2xhdGVkIG9uIGVhY2ggeCBsaW5lIGlmIHBvc3NpYmxlLCB0aGVuIGludGVycG9sYXRlIHgKICAgIGxldCB2MCA9IG51bGwsIHYxID0gbnVsbDsKICAgIGlmIChnMGEhPW51bGwgJiYgZzBiIT1udWxsKSB2MCA9IGxlcnAoZzBhLGcwYix0eSk7CiAgICBpZiAoZzFhIT1udWxsICYmIGcxYiE9bnVsbCkgdjEgPSBsZXJwKGcxYSxnMWIsdHkpOwogICAgaWYgKHYwIT1udWxsICYmIHYxIT1udWxsKSByZXR1cm4ge3ZhbHVlOiBsZXJwKHYwLHYxLHR4KSwgbm90ZTogbm90ZS5jb25jYXQoWyJNaXNzaW5nIGNlbGxzIOKGkiAyLXN0ZXAgaW50ZXJwb2xhdGlvbiJdKX07CgogICAgcmV0dXJuIHt2YWx1ZTogbnVsbCwgbm90ZTogbm90ZS5jb25jYXQoWyJSZXF1ZXN0ZWQgcG9pbnQgZmFsbHMgaW50byBub24tcHVibGlzaGVkIGFyZWEiXSl9OwogIH0KCiAgY29uc3QgdiA9CiAgICBRMTEqKDEtdHgpKigxLXR5KSArCiAgICBRMjEqKHR4KSooMS10eSkgKwogICAgUTEyKigxLXR4KSoodHkpICsKICAgIFEyMioodHgpKih0eSk7CiAgcmV0dXJuIHt2YWx1ZTogdiwgbm90ZX07Cn0KCmZ1bmN0aW9uIGdldFJhZGlvVmFsdWUobmFtZSl7CiAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBpbnB1dFtuYW1lPSIke25hbWV9Il06Y2hlY2tlZGApOwogIHJldHVybiBlbCA/IGVsLnZhbHVlIDogbnVsbDsKfQoKbGV0IE1PREUgPSAibm9ybWFsIjsgLy8gbm9ybWFsIHwgc2hvcnQKCmNvbnN0IHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIudGFiIik7CnRhYnMuZm9yRWFjaCgodCkgPT4gewogIHQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CiAgICB0YWJzLmZvckVhY2goeCA9PiB7IHguY2xhc3NMaXN0LnJlbW92ZSgiYWN0aXZlIik7IHguc2V0QXR0cmlidXRlKCJhcmlhLXNlbGVjdGVkIiwiZmFsc2UiKTsgfSk7CiAgICB0LmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpOwogICAgdC5zZXRBdHRyaWJ1dGUoImFyaWEtc2VsZWN0ZWQiLCJ0cnVlIik7CiAgICBNT0RFID0gdC5kYXRhc2V0Lm1vZGU7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9kZXBpbGwiKS50ZXh0Q29udGVudCA9IGBNb2RlOiAke01PREU9PT0ibm9ybWFsIj8iTm9ybWFsIjoiU2hvcnQifWA7CiAgfSk7Cn0pOwoKZnVuY3Rpb24gc2hvd0FsZXJ0KGxpbmVzKXsKICBjb25zdCBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFsZXJ0Iik7CiAgaWYgKCFsaW5lcyB8fCBsaW5lcy5sZW5ndGg9PT0wKXsKICAgIGEuY2xhc3NMaXN0LnJlbW92ZSgic2hvdyIpOwogICAgYS5pbm5lckhUTUwgPSAiIjsKICAgIHJldHVybjsKICB9CiAgYS5jbGFzc0xpc3QuYWRkKCJzaG93Iik7CiAgYS5pbm5lckhUTUwgPSBsaW5lcy5tYXAoeCA9PiBg4oCiICR7eH1gKS5qb2luKCI8YnIvPiIpOwp9CgoKZnVuY3Rpb24gdXBkYXRlSU9TQmFyKCl7CiAgY29uc3QgZGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkaXN0Iik/LnRleHRDb250ZW50ID8/ICLigJQiOwogIGNvbnN0IG1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXJnaW4iKT8udGV4dENvbnRlbnQgPz8gIuKAlCI7CiAgY29uc3QgdmVyZGljdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2ZXJkaWN0VGV4dCIpPy50ZXh0Q29udGVudCA/PyAiVmVyZGljdDog4oCUIjsKCiAgY29uc3QgaW9zRGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpb3NfZGlzdCIpOwogIGNvbnN0IGlvc01hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpb3NfbWFyZ2luIik7CiAgY29uc3QgaW9zVmVyZGljdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpb3NfdmVyZGljdCIpOwoKICBpZiAoaW9zRGlzdCkgaW9zRGlzdC50ZXh0Q29udGVudCA9IGRpc3Q7CiAgaWYgKGlvc01hcmdpbikgaW9zTWFyZ2luLnRleHRDb250ZW50ID0gbWFyZ2luOwogIGlmIChpb3NWZXJkaWN0KSBpb3NWZXJkaWN0LnRleHRDb250ZW50ID0gdmVyZGljdC5yZXBsYWNlKCJWZXJkaWN0OiAiLCIiKTsKCiAgaWYgKGlvc1ZlcmRpY3QpewogICAgaW9zVmVyZGljdC5jbGFzc0xpc3QucmVtb3ZlKCJnb29kIiwiYmFkIik7CiAgICBjb25zdCB2ID0gdmVyZGljdC50b0xvd2VyQ2FzZSgpOwogICAgaWYgKHYuaW5jbHVkZXMoIm9rIikgJiYgIXYuaW5jbHVkZXMoIm5vdCBvayIpKSBpb3NWZXJkaWN0LmNsYXNzTGlzdC5hZGQoImdvb2QiKTsKICAgIGlmICh2LmluY2x1ZGVzKCJub3Qgb2siKSB8fCB2LmluY2x1ZGVzKCJkbyBub3QgYXR0ZW1wdCIpKSBpb3NWZXJkaWN0LmNsYXNzTGlzdC5hZGQoImJhZCIpOwogIH0KfQoKZnVuY3Rpb24gY29tcHV0ZSgpewogIGNvbnN0IHJ3cSA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJ3cSIpLnZhbHVlKTsKICBjb25zdCB0b3JhID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG9yYSIpLnZhbHVlKTsKICBjb25zdCB3ZGlyID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid2RpciIpLnZhbHVlKTsKICBjb25zdCB3c3BkID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid3NwZCIpLnZhbHVlKTsKICBjb25zdCBwYSAgID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGEiKS52YWx1ZSk7CiAgY29uc3Qgb2F0ICA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9hdCIpLnZhbHVlKTsKICBjb25zdCBvdXRtb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm91dG1vZGUiKS52YWx1ZTsKICBjb25zdCBzbG9wZSA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNsb3BlIikudmFsdWUgfHwgIjAiKTsKICBjb25zdCB3ZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ3Jhc3N3ZXQiKS5jaGVja2VkOwogIGNvbnN0IHNvZnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic29mdCIpLmNoZWNrZWQ7CiAgY29uc3QgZ3Jhc3NEcnkgPSBnZXRSYWRpb1ZhbHVlKCJncmFzc2RyeSIpOwogIGNvbnN0IHdlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ3ZWlnaHQiKS52YWx1ZTsKCiAgY29uc3Qgd2FybiA9IFtdOwogIGNvbnN0IG5lZWQgPSBbCiAgICBbIlJ1bndheSBRRlUiLCByd3FdLAogICAgWyJUT1JBIiwgdG9yYV0sCiAgICBbIldpbmQgZGlyIiwgd2Rpcl0sCiAgICBbIldpbmQgc3BlZWQiLCB3c3BkXSwKICAgIFsiUHJlc3N1cmUgYWx0IiwgcGFdLAogICAgWyJPQVQiLCBvYXRdLAogIF0uZmlsdGVyKChbXyx2XSkgPT4gTnVtYmVyLmlzTmFOKHYpKTsKICBpZiAobmVlZC5sZW5ndGgpewogICAgc2hvd0FsZXJ0KFsiUmVtcGxpcyB0b3VzIGxlcyBjaGFtcHM6ICIgKyBuZWVkLm1hcCh4ID0+IHhbMF0pLmpvaW4oIiwgIildKTsKICAgIHNldFdhaXRpbmcoKTsKICAgIHJldHVybjsKICB9CgogIGlmIChncmFzc0RyeSA9PT0gIk5PIil7CiAgICB3YXJuLnB1c2goIkdyYXNzID4gMjUgY206IHRha2Utb2ZmIHNob3VsZCBub3QgYmUgYXR0ZW1wdGVkLiIpOwogIH0KICBpZiAoc2xvcGUgPCAwKSB3YXJuLnB1c2goIlNsb3BlIG7DqWdhdGl2ZTogbm9uIGfDqXLDqWUgKG1ldHMgMCBzaSBkb3duaGlsbCkuIik7CiAgaWYgKE51bWJlci5pc05hTihzbG9wZSkpIHdhcm4ucHVzaCgiU2xvcGUgaW52YWxpZGUg4oaSIDAlIGFwcGxpcXXDqS4iKTsKCiAgY29uc3QgcndxTiA9IG5vcm1hbGl6ZURlZyhyd3EpOwogIGNvbnN0IHdkaXJOID0gbm9ybWFsaXplRGVnKHdkaXIpOwogIGNvbnN0IGRlbHRhID0gd3JhcDE4MCh3ZGlyTiAtIHJ3cU4pOwogIGNvbnN0IHJhZCA9IGRlbHRhICogTWF0aC5QSS8xODA7CgogIGNvbnN0IGhlYWQgPSB3c3BkICogTWF0aC5jb3MocmFkKTsgLy8gKyA9IGhlYWR3aW5kCiAgY29uc3QgY3Jvc3MgPSB3c3BkICogTWF0aC5zaW4ocmFkKTsgLy8gKyA9IGZyb20gcmlnaHQ/IChzaWduIGluZGljYXRlcyBkaXJlY3Rpb24pCiAgY29uc3QgaGVhZEFicyA9IE1hdGguYWJzKGhlYWQpOwogIGNvbnN0IGNyb3NzQWJzID0gTWF0aC5hYnMoY3Jvc3MpOwoKICBjb25zdCBoZWFkU3RyID0gaGVhZCA+PSAwID8gYEhXICR7Zm10TnVtKGhlYWQsMSl9IGt0YCA6IGBUVyAke2ZtdE51bSgtaGVhZCwxKX0ga3RgOwogIGNvbnN0IHh3U2lkZSA9IGNyb3NzID49IDAgPyAiZnJvbSByaWdodCIgOiAiZnJvbSBsZWZ0IjsKCiAgLy8gSW50ZXJwb2xhdGUgYmFzZSBkaXN0YW5jZXMgZnJvbSB0YWJsZXMKICBjb25zdCB0YWIgPSBUQUJMRVNbd2VpZ2h0XVtNT0RFXTsKICBjb25zdCBncjAgPSBiaWxpbmVhcih0YWIuZ3IsIEdSSURfQUxULCBHUklEX09BVCwgcGEsIG9hdCk7CiAgY29uc3QgZDUwID0gYmlsaW5lYXIodGFiLmQ1MCwgR1JJRF9BTFQsIEdSSURfT0FULCBwYSwgb2F0KTsKCiAgLy8gQnVpbGQgZmFjdG9ycwogIC8vIFdpbmQgZmFjdG9yOiAtMTAlIHBlciAxNCBrdCBoZWFkd2luZDsgKzEwJSBwZXIgMyBrdCB0YWlsd2luZAogIGxldCB3aW5kRmFjdG9yID0gMS4wOwogIGlmIChoZWFkID4gMCl7CiAgICB3aW5kRmFjdG9yICo9ICgxIC0gMC4xMCAqIChoZWFkLzE0LjApKTsKICB9IGVsc2UgaWYgKGhlYWQgPCAwKXsKICAgIHdpbmRGYWN0b3IgKj0gKDEgKyAwLjEwICogKCgtaGVhZCkvMy4wKSk7CiAgfQogIC8vIFByZXZlbnQgaW5zYW5lIG5lZ2F0aXZlCiAgd2luZEZhY3RvciA9IE1hdGgubWF4KDAuMTAsIHdpbmRGYWN0b3IpOwoKICAvLyBSdW53YXkgZmFjdG9ycyAoYXBwbGllZCB0byBib3RoIG91dHB1dHMgYXMgY29uc2VydmF0aXZlKQogIGxldCBydW53YXlGYWN0b3IgPSAxLjA7CiAgaWYgKGdyYXNzRHJ5ICYmIGdyYXNzRHJ5ICE9PSAiTk8iKXsKICAgIHJ1bndheUZhY3RvciAqPSAoMSArIHBhcnNlRmxvYXQoZ3Jhc3NEcnkpKTsKICAgIGlmICh3ZXQpIHJ1bndheUZhY3RvciAqPSAxLjEwOwogIH0gZWxzZSB7CiAgICBpZiAod2V0KSB3YXJuLnB1c2goIkdyYXNzIHdldCBjb2Now6kgbWFpcyBncmFzcyBkcnkgPSBub25lIOKGkiBpZ25vcsOpLiIpOwogIH0KICBpZiAoc29mdCkgcnVud2F5RmFjdG9yICo9IDEuNDU7CiAgaWYgKCFOdW1iZXIuaXNOYU4oc2xvcGUpICYmIHNsb3BlID4gMCl7CiAgICBydW53YXlGYWN0b3IgKj0gKDEgKyAwLjA5KnNsb3BlKTsgLy8gKzklIHBlciAxJQogIH0KCiAgLy8gT3V0cHV0IHNlbGVjdGlvbgogIGxldCBiYXNlID0gbnVsbCwgYmFzZUxhYmVsID0gIiI7CiAgbGV0IG5vdGVzID0gW107CiAgaWYgKG91dG1vZGUgPT09ICJnciIpewogICAgYmFzZSA9IGdyMC52YWx1ZTsKICAgIGJhc2VMYWJlbCA9ICJHcm91bmQgcm9sbCI7CiAgICBub3RlcyA9IG5vdGVzLmNvbmNhdChncjAubm90ZSk7CiAgfSBlbHNlIGlmIChvdXRtb2RlID09PSAiNTAiKXsKICAgIGJhc2UgPSBkNTAudmFsdWU7CiAgICBiYXNlTGFiZWwgPSAiNTAgZnQgZGlzdGFuY2UiOwogICAgbm90ZXMgPSBub3Rlcy5jb25jYXQoZDUwLm5vdGUpOwogIH0gZWxzZSB7IC8vIGJvdGgKICAgIC8vIFdlJ2xsIGNvbXB1dGUgY29ycmVjdGVkIGZvciBib3RoIGFuZCBzaG93IDUwZnQgYXMgcHJpbWFyeSBwbHVzIG5vdGUKICAgIGJhc2UgPSBkNTAudmFsdWU7CiAgICBiYXNlTGFiZWwgPSAiNTAgZnQgZGlzdGFuY2UgKHByaW1hcnkpIjsKICAgIG5vdGVzID0gbm90ZXMuY29uY2F0KGQ1MC5ub3RlKTsKICB9CgogIC8vIElmIG5vbiBwdWJsaXNoZWQgLT4gTi9BCiAgY29uc3Qgbm9uUHVibGlzaGVkID0gKGJhc2UgPT09IG51bGwgfHwgYmFzZSA9PT0gdW5kZWZpbmVkIHx8IE51bWJlci5pc05hTihiYXNlKSk7CiAgY29uc3Qgbm9uUHVibGlzaGVkR1IgPSAoZ3IwLnZhbHVlPT09bnVsbCB8fCBncjAudmFsdWU9PT11bmRlZmluZWQpOwogIGNvbnN0IG5vblB1Ymxpc2hlZDUwID0gKGQ1MC52YWx1ZT09PW51bGwgfHwgZDUwLnZhbHVlPT09dW5kZWZpbmVkKTsKCiAgLy8gQ29tcHV0ZSBjb3JyZWN0ZWQgdmFsdWVzCiAgbGV0IGNvcnJlY3RlZEdSID0gbm9uUHVibGlzaGVkR1IgPyBudWxsIDogZ3IwLnZhbHVlICogd2luZEZhY3RvciAqIHJ1bndheUZhY3RvcjsKICBsZXQgY29ycmVjdGVkNTAgPSBub25QdWJsaXNoZWQ1MCA/IG51bGwgOiBkNTAudmFsdWUgKiB3aW5kRmFjdG9yICogcnVud2F5RmFjdG9yOwoKICAvLyBDaG9vc2UgZGlzdGFuY2UgdXNlZCBmb3IgbWFyZ2luCiAgbGV0IGRpc3RVc2VkID0gbnVsbDsKICBsZXQgZGlzdERlc2MgPSAiIjsKICBpZiAob3V0bW9kZSA9PT0gImdyIil7CiAgICBkaXN0VXNlZCA9IGNvcnJlY3RlZEdSOwogICAgZGlzdERlc2MgPSAiVXNpbmcgZ3JvdW5kIHJvbGwiOwogIH0gZWxzZSBpZiAob3V0bW9kZSA9PT0gIjUwIil7CiAgICBkaXN0VXNlZCA9IGNvcnJlY3RlZDUwOwogICAgZGlzdERlc2MgPSAiVXNpbmcgNTAgZnQgZGlzdGFuY2UiOwogIH0gZWxzZSB7CiAgICBkaXN0VXNlZCA9IGNvcnJlY3RlZDUwOwogICAgZGlzdERlc2MgPSAiUHJpbWFyeTogNTAgZnQgKGFsc28gY29tcHV0ZXMgZ3JvdW5kIHJvbGwpIjsKICB9CgogIC8vIE1hcmdpbgogIGxldCBtYXJnaW4gPSBudWxsOwogIGlmIChkaXN0VXNlZCAhPSBudWxsKSBtYXJnaW4gPSB0b3JhIC0gZGlzdFVzZWQ7CgogIC8vIFdhcm5pbmdzIGZvciBtaXNzaW5nIGFyZWFzCiAgaWYgKG91dG1vZGUgPT09ICJib3RoIil7CiAgICBpZiAobm9uUHVibGlzaGVkR1IpIHdhcm4ucHVzaCgiR3JvdW5kIHJvbGw6IE4vQSAobm9uLXB1Ymxpc2hlZCBhcmVhKS4iKTsKICAgIGlmIChub25QdWJsaXNoZWQ1MCkgd2Fybi5wdXNoKCI1MCBmdCBkaXN0YW5jZTogTi9BIChub24tcHVibGlzaGVkIGFyZWEpLiIpOwogIH0gZWxzZSBpZiAobm9uUHVibGlzaGVkKXsKICAgIHdhcm4ucHVzaCgiUmVxdWVzdGVkIHBvaW50IGlzIGluIGEgbm9uLXB1Ymxpc2hlZCBhcmVhIG9mIHRoZSB0YWJsZSAoY2VsbHMgYmxhY2svZGlhZ29uYWwpLiIpOwogIH0KCiAgLy8gVXBkYXRlIFVJIEtQSXMKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaHciKS50ZXh0Q29udGVudCA9IGhlYWRTdHI7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImh3ZGVzYyIpLnRleHRDb250ZW50ID0gYM6UID0gJHtmbXROdW0oZGVsdGEsMCl9wrAgwrcgd2luZCBmYWN0b3IgPSAke2ZtdE51bSh3aW5kRmFjdG9yLDMpfWA7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInh3IikudGV4dENvbnRlbnQgPSBgJHtmbXROdW0oY3Jvc3NBYnMsMSl9IGt0YDsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgieHdkZXNjIikudGV4dENvbnRlbnQgPSBgJHt4d1NpZGV9IMK3IHNpZ25lZCAke2ZtdE51bShjcm9zcywxKX0ga3RgOwoKICAvLyBEaXN0YW5jZSBLUEkKICBjb25zdCBkaXN0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGlzdCIpOwogIGNvbnN0IGRpc3REZXNjRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGlzdGRlc2MiKTsKCiAgaWYgKG91dG1vZGUgPT09ICJib3RoIil7CiAgICBjb25zdCBkMSA9IGNvcnJlY3RlZDUwPT1udWxsID8gIk4vQSIgOiBgJHtmbXROdW0oY29ycmVjdGVkNTAsMCl9IG1gOwogICAgY29uc3QgZDIgPSBjb3JyZWN0ZWRHUj09bnVsbCA/ICJOL0EiIDogYCR7Zm10TnVtKGNvcnJlY3RlZEdSLDApfSBtYDsKICAgIGRpc3RFbC50ZXh0Q29udGVudCA9IGQxOwogICAgZGlzdERlc2NFbC50ZXh0Q29udGVudCA9IGA1MCBmdDogJHtkMX0gwrcgR1I6ICR7ZDJ9IMK3IHJ1bndheSBmYWN0b3IgPSAke2ZtdE51bShydW53YXlGYWN0b3IsMyl9YDsKICB9IGVsc2UgewogICAgZGlzdEVsLnRleHRDb250ZW50ID0gZGlzdFVzZWQ9PW51bGwgPyAiTi9BIiA6IGAke2ZtdE51bShkaXN0VXNlZCwwKX0gbWA7CiAgICBkaXN0RGVzY0VsLnRleHRDb250ZW50ID0gYCR7ZGlzdERlc2N9IMK3IHJ1bndheSBmYWN0b3IgPSAke2ZtdE51bShydW53YXlGYWN0b3IsMyl9YDsKICB9CgogIC8vIE1hcmdpbiBLUEkKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFyZ2luIikudGV4dENvbnRlbnQgPSBtYXJnaW49PW51bGwgPyAiTi9BIiA6IGAke2ZtdE51bShtYXJnaW4sMCl9IG1gOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXJnaW5kZXNjIikudGV4dENvbnRlbnQgPSBtYXJnaW49PW51bGwgPyAi4oCUIiA6IGBUT1JBICR7Zm10TnVtKHRvcmEsMCl9IOKIkiBESVNUICR7Zm10TnVtKGRpc3RVc2VkLDApfWA7CgogIC8vIFZlcmRpY3QKICBjb25zdCB2ZXJkaWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZlcmRpY3QiKTsKICBjb25zdCB2ZXJkaWN0VGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2ZXJkaWN0VGV4dCIpOwogIGNvbnN0IHZlcmRpY3RTdWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmVyZGljdFN1YiIpOwogIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGF0dXMiKTsKCiAgdmVyZGljdC5jbGFzc0xpc3QucmVtb3ZlKCJnb29kIiwiYmFkIik7CiAgc3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoImdvb2QiLCJiYWQiLCJ3YXJuIik7CgogIGxldCB2ID0gIuKAlCIsIHMgPSAi4oCUIiwgc3ViID0gIuKAlCI7CgogIGlmIChncmFzc0RyeSA9PT0gIk5PIil7CiAgICB2ID0gIk5PVCBPSyI7CiAgICBzID0gIkRPIE5PVCBBVFRFTVBUIjsKICAgIHN1YiA9ICJHcmFzcyBsb25nZXIgdGhhbiAyNSBjbSI7CiAgICB2ZXJkaWN0LmNsYXNzTGlzdC5hZGQoImJhZCIpOwogICAgc3RhdHVzLmNsYXNzTGlzdC5hZGQoImJhZCIpOwogIH0gZWxzZSBpZiAoZGlzdFVzZWQgPT0gbnVsbCB8fCBtYXJnaW4gPT0gbnVsbCl7CiAgICB2ID0gIk4vQSI7CiAgICBzID0gIkNIRUNLIExJTUlUUyI7CiAgICBzdWIgPSAiUGVyZm9ybWFuY2Ugbm90IGF2YWlsYWJsZSBmb3IgdGhlc2UgY29uZGl0aW9ucyI7CiAgICBzdGF0dXMuY2xhc3NMaXN0LmFkZCgid2FybiIpOwogIH0gZWxzZSBpZiAobWFyZ2luID49IDApewogICAgdiA9ICJPSyI7CiAgICBzID0gIk1BUkdJTiI7CiAgICBzdWIgPSBgUG9zaXRpdmUgbWFyZ2luOiAke2ZtdE51bShtYXJnaW4sMCl9IG1gOwogICAgdmVyZGljdC5jbGFzc0xpc3QuYWRkKCJnb29kIik7CiAgICBzdGF0dXMuY2xhc3NMaXN0LmFkZCgiZ29vZCIpOwogIH0gZWxzZSB7CiAgICB2ID0gIk5PVCBPSyI7CiAgICBzID0gIklOU1VGRklDSUVOVCI7CiAgICBzdWIgPSBgTmVnYXRpdmUgbWFyZ2luOiAke2ZtdE51bShtYXJnaW4sMCl9IG1gOwogICAgdmVyZGljdC5jbGFzc0xpc3QuYWRkKCJiYWQiKTsKICAgIHN0YXR1cy5jbGFzc0xpc3QuYWRkKCJiYWQiKTsKICB9CgogIHZlcmRpY3RUZXh0LnRleHRDb250ZW50ID0gYFZlcmRpY3Q6ICR7dn1gOwogIHZlcmRpY3RTdWIudGV4dENvbnRlbnQgPSBzdWI7CiAgc3RhdHVzLnRleHRDb250ZW50ID0gczsKCiAgLy8gRGV0YWlscwogIGNvbnN0IGRldCA9IFtdOwogIGRldC5wdXNoKGBNb2RlPSR7TU9ERX0gwrcgVGFibGUgd2VpZ2h0PSR7d2VpZ2h0fSBrZ2ApOwogIGRldC5wdXNoKGBQQT0ke2ZtdE51bShwYSwwKX0gZnQgwrcgT0FUPSR7Zm10TnVtKG9hdCwxKX3CsENgKTsKICBkZXQucHVzaChgQmFzZSAoaW50ZXJwb2xhdGVkKTogR1I9JHtncjAudmFsdWU9PW51bGw/Ik4vQSI6Zm10TnVtKGdyMC52YWx1ZSwxKX0gbSDCtyA1MGZ0PSR7ZDUwLnZhbHVlPT1udWxsPyJOL0EiOmZtdE51bShkNTAudmFsdWUsMSl9IG1gKTsKICBkZXQucHVzaChgRmFjdG9yczogd2luZD0ke2ZtdE51bSh3aW5kRmFjdG9yLDMpfSDCtyBydW53YXk9JHtmbXROdW0ocnVud2F5RmFjdG9yLDMpfSDCtyB0b3RhbD0ke2ZtdE51bSh3aW5kRmFjdG9yKnJ1bndheUZhY3RvciwzKX1gKTsKICBpZiAobm90ZXMubGVuZ3RoKSBkZXQucHVzaChgTm90ZXM6ICR7bm90ZXMuam9pbigiIHwgIil9YCk7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRldGFpbHMiKS50ZXh0Q29udGVudCA9IGRldC5qb2luKCJcbiIpOwoKICB1cGRhdGVJT1NCYXIoKTsKICBzaG93QWxlcnQod2Fybik7Cn0KCmZ1bmN0aW9uIHNldFdhaXRpbmcoKXsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaHciKS50ZXh0Q29udGVudCA9ICLigJQiOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJod2Rlc2MiKS50ZXh0Q29udGVudCA9ICLigJQiOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ4dyIpLnRleHRDb250ZW50ID0gIuKAlCI7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInh3ZGVzYyIpLnRleHRDb250ZW50ID0gIuKAlCI7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRpc3QiKS50ZXh0Q29udGVudCA9ICLigJQiOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkaXN0ZGVzYyIpLnRleHRDb250ZW50ID0gIuKAlCI7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1hcmdpbiIpLnRleHRDb250ZW50ID0gIuKAlCI7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1hcmdpbmRlc2MiKS50ZXh0Q29udGVudCA9ICLigJQiOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkZXRhaWxzIikudGV4dENvbnRlbnQgPSAi4oCUIjsKCiAgY29uc3QgdmVyZGljdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2ZXJkaWN0Iik7CiAgdmVyZGljdC5jbGFzc0xpc3QucmVtb3ZlKCJnb29kIiwiYmFkIik7CiAgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0YXR1cyIpOwogIHN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKCJnb29kIiwiYmFkIiwid2FybiIpOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2ZXJkaWN0VGV4dCIpLnRleHRDb250ZW50ID0gIlZlcmRpY3Q6IOKAlCI7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZlcmRpY3RTdWIiKS50ZXh0Q29udGVudCA9ICJXYWl0aW5nIGZvciBpbnB1dHMiOwogIHN0YXR1cy50ZXh0Q29udGVudCA9ICLigJQiOwogIHVwZGF0ZUlPU0JhcigpOwp9CndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgKCkgPT4gewogIC8vIEJpbmQgYnV0dG9ucyBzYWZlbHkgKGlPUyBiYXIgaXMgYXBwZW5kZWQgYWZ0ZXIgdGhlIHNjcmlwdCBpbiB0aGlzIGJ1aWxkKQogIGNvbnN0IGlvc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpb3NfY29tcHV0ZSIpOwogIGlmIChpb3NCdG4pewogICAgaW9zQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKGUpID0+IHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBjb21wdXRlKCk7CiAgICB9KTsKICB9Cgpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29tcHV0ZSIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKGUpID0+IHsKICBlLnByZXZlbnREZWZhdWx0KCk7CiAgY29tcHV0ZSgpOwp9KTsKCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZXNldCIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogIGZvciAoY29uc3QgaWQgb2YgWyJyd3EiLCJ0b3JhIiwid2RpciIsIndzcGQiLCJwYSIsIm9hdCIsInNsb3BlIl0pewogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnZhbHVlID0gIiI7CiAgfQogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJncmFzc3dldCIpLmNoZWNrZWQgPSBmYWxzZTsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic29mdCIpLmNoZWNrZWQgPSBmYWxzZTsKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJncmFzc2RyeSJdW3ZhbHVlPSIwIl0nKS5jaGVja2VkID0gdHJ1ZTsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib3V0bW9kZSIpLnZhbHVlID0gIjUwIjsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid2VpZ2h0IikudmFsdWUgPSAiMTk5OSI7CiAgc2hvd0FsZXJ0KFtdKTsKICAKICAvLyBJbml0aWFsIFVJIHN0YXRlCiAgc2V0V2FpdGluZygpOwogIHVwZGF0ZUlPU0JhcigpOwp9KTsKfSk7CgovLyBBdXRvY2FsYyBvbiBFbnRlcgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgKGUpID0+IHsKICBpZiAoZS5rZXkgPT09ICJFbnRlciIpewogICAgY29uc3QgdGFnID0gKGUudGFyZ2V0ICYmIGUudGFyZ2V0LnRhZ05hbWUgfHwgIiIpLnRvTG93ZXJDYXNlKCk7CiAgICBpZiAodGFnID09PSAiaW5wdXQiIHx8IHRhZyA9PT0gInNlbGVjdCIpewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGNvbXB1dGUoKTsKICAgIH0KICB9Cn0pOwoKCjwvc2NyaXB0Pgo8IS0tIGlPUyBTdGlja3kgU3VtbWFyeSBCYXIgKHZpc2libGUgb24gc21hbGwgc2NyZWVucykgLS0+CjxkaXYgYXJpYS1sYWJlbD0iUsOpc3Vtw6kgcGVyZm9ybWFuY2UiIGNsYXNzPSJpb3NiYXIiIHJvbGU9InJlZ2lvbiI+CjxkaXYgY2xhc3M9ImlubmVyIj4KPGRpdiBjbGFzcz0ia3BpcyI+CjxkaXYgY2xhc3M9Im1pbmkiPgo8ZGl2IGNsYXNzPSJrIj5EaXN0YW5jZTwvZGl2Pgo8ZGl2IGNsYXNzPSJ2IG1vbm8iIGlkPSJpb3NfZGlzdCI+NzMwIG08L2Rpdj4KPC9kaXY+CjxkaXYgY2xhc3M9Im1pbmkiPgo8ZGl2IGNsYXNzPSJrIj5NYXJnZSBUT1JBPC9kaXY+CjxkaXYgY2xhc3M9InYgbW9ubyIgaWQ9Imlvc19tYXJnaW4iPjEwNzAgbTwvZGl2Pgo8L2Rpdj4KPGRpdiBjbGFzcz0ibWluaSI+CjxkaXYgY2xhc3M9ImsiPlZlcmRpY3Q8L2Rpdj4KPGRpdiBjbGFzcz0idiBtb25vIGdvb2QiIGlkPSJpb3NfdmVyZGljdCI+T0s8L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJhY3Rpb25zIj4KPGJ1dHRvbiBjbGFzcz0iYnRuIHByaW1hcnkiIGlkPSJpb3NfY29tcHV0ZSI+Q29tcHV0ZTwvYnV0dG9uPgo8L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8L2JvZHk+PC9odG1sPg== -->
<html lang="fr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport">
<title>DA42 â€“ Takeoff Performance (EFB)</title>
<meta content="yes" name="apple-mobile-web-app-capable">
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
<style>

    :root {
      --bg: #0b1020;
      --card: rgba(255,255,255,0.06);
      --card2: rgba(255,255,255,0.08);
      --line: rgba(255,255,255,0.12);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.60);
      --accent: #70d6ff;
      --good: rgba(56,209,138,0.95);
      --bad: rgba(255,92,122,0.98);
      --warn: rgba(255,194,71,0.98);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --r: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1000px 400px at 20% -10%, rgba(112,214,255,0.25), transparent 60%),
        radial-gradient(900px 420px at 90% 10%, rgba(255,92,122,0.18), transparent 60%),
        radial-gradient(700px 380px at 50% 100%, rgba(56,209,138,0.16), transparent 60%),
        var(--bg);
      min-height:100vh;
    }
    .wrap{max-width: 1120px; margin: 0 auto; padding: 24px 18px 120px;}
    header{display:flex; align-items:flex-start; justify-content:space-between; gap:16px; margin-bottom: 18px;}
    .brand{display:flex; align-items:center; gap:12px;}
    .badge{width:28px; height:28px; border-radius:10px; background: linear-gradient(135deg, rgba(112,214,255,0.95), rgba(255,92,122,0.85)); box-shadow: 0 12px 30px rgba(112,214,255,0.15);}
    h1{font-size: 20px; margin:0; letter-spacing:0.2px;}
    .sub{font-size: 12.5px; color: var(--muted); margin-top: 2px;}
    .topright{display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end;}
    .chip{font-size: 12px; color: var(--muted); padding: 8px 10px; border-radius: 999px; border:1px solid var(--line); background: rgba(255,255,255,0.04);}
    .grid{display:grid; grid-template-columns: 1.2fr 0.8fr; gap: 14px; align-items:start;}
    .card{border:1px solid var(--line); border-radius: var(--r); background: var(--card); box-shadow: 0 12px 40px rgba(0,0,0,0.25); overflow:hidden;}
    .head{padding: 14px 16px; border-bottom: 1px solid var(--line); background: rgba(255,255,255,0.03); display:flex; align-items:flex-start; justify-content:space-between; gap: 12px;}
    .title2{font-size: 13px; font-weight: 800; letter-spacing: 0.2px;}
    .hint{font-size: 12px; color: var(--muted); margin-top: 3px;}
    .pillrow{display:flex; gap: 8px; flex-wrap:wrap; justify-content:flex-end;}
    .pill{font-size: 11px; color: rgba(255,255,255,0.82); padding: 6px 10px; border-radius: 999px; border:1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.04);}
    .body{padding: 14px 16px;}
    .tabs{display:flex; gap:10px; margin-bottom: 12px;}
    .tab{flex:1; display:flex; align-items:center; justify-content:space-between; gap:10px; padding: 12px 12px; border-radius: 14px; border: 1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.04); cursor:pointer; user-select:none;}
    .tab.active{border-color: rgba(112,214,255,0.55); background: rgba(112,214,255,0.10);}
    .tab .label{font-weight: 800; font-size: 12.5px;}
    .tab .meta{font-size: 11px; color: var(--muted);}
    .formgrid{display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px;}
    .field{display:flex; flex-direction:column; gap:6px;}
    label{font-size: 11.5px; color: var(--muted);}
    label span{color: rgba(255,255,255,0.55); font-weight:600; margin-left: 4px;}
    input, select{
      width:100%;
      padding: 11px 12px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      outline:none;
      font-size: 13px;
    }
    input:focus, select:focus{border-color: rgba(112,214,255,0.65); box-shadow: 0 0 0 3px rgba(112,214,255,0.12);}
    .divider{height:1px; background: var(--line); margin: 12px 0;}
    .sectiontitle{font-size: 12px; font-weight: 800; color: rgba(255,255,255,0.85); margin-bottom: 8px;}
    .optgrid{display:grid; grid-template-columns: 1fr; gap: 8px;}
    .opt{display:flex; gap:10px; align-items:flex-start; padding: 10px 10px; border-radius: 14px; border:1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.03);}
    .opt input{margin-top: 2px; width:auto;}
    .opt .t{font-size: 12.5px; font-weight:700;}
    .opt .d{font-size: 11px; color: var(--muted); margin-top: 2px;}
    .row{display:grid; grid-template-columns: 1fr 1fr; gap:10px;}
    .btnrow{display:flex; gap:10px; margin-top: 12px;}
    .btn{flex:1; padding: 12px 12px; border-radius: 14px; border:1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.06); color: var(--text); cursor:pointer; font-weight:800;}
    .btn.primary{border-color: rgba(112,214,255,0.55); background: rgba(112,214,255,0.14);}
    .btn:active{transform: translateY(1px);}
    .alert{display:none; margin-top: 12px; padding: 10px 12px; border-radius: 14px; border:1px solid rgba(255,194,71,0.45); background: rgba(255,194,71,0.12); color: rgba(255,255,255,0.90); font-size: 12px;}
    .kpi{border:1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.03); border-radius: 16px; padding: 12px 12px;}
    .kpi .k{font-size: 11px; color: var(--muted); margin-bottom: 6px;}
    .kpi .v{font-size: 24px; font-weight: 900; letter-spacing: 0.2px;}
    .kpi .s{font-size: 11px; color: var(--muted); margin-top: 6px;}
    .mono{font-family: var(--mono);}
    .verdict{display:flex; justify-content:space-between; gap: 10px; align-items:center; padding: 12px 12px; border-radius: 16px; margin-top: 12px; border:1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.03);}
    .verdict.good{border-color: rgba(56,209,138,0.45); background: rgba(56,209,138,0.12);}
    .verdict.bad{border-color: rgba(255,92,122,0.45); background: rgba(255,92,122,0.12);}
    .verdict.warn{border-color: rgba(255,194,71,0.45); background: rgba(255,194,71,0.12);}
    .verdict .big{font-size: 14px; font-weight: 900;}
    .verdict .small{font-size: 11px; color: rgba(255,255,255,0.78); margin-top: 2px;}
    .status{font-size: 11px; font-weight: 900; padding: 8px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.14); background: rgba(255,255,255,0.06);}
    .status.good{border-color: rgba(56,209,138,0.55); color: rgba(56,209,138,0.95);}
    .status.bad{border-color: rgba(255,92,122,0.55); color: rgba(255,92,122,0.98);}
    .status.warn{border-color: rgba(255,194,71,0.55); color: rgba(255,194,71,0.98);}
    .footnote{font-size: 11px; color: var(--muted); line-height: 1.35;}
    .iosbar{position: fixed; left:0; right:0; bottom:0; padding: 14px 18px calc(14px + env(safe-area-inset-bottom)); background: rgba(5,8,16,0.86); border-top: 1px solid rgba(255,255,255,0.10); backdrop-filter: blur(10px);}
    .iosbar .inner{max-width: 1120px; margin:0 auto; display:flex; gap:10px; align-items:center; justify-content:space-between;}
    .iosbar .kpis{display:flex; gap:10px; align-items:stretch; flex: 1; min-width: 0;}
    .iosbar .mini{border: 1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.04); border-radius: 14px; padding: 10px 12px; min-width: 0; flex: 1;}
    .iosbar .mini .k{font-size: 11px; color: var(--muted); margin-bottom: 4px;}
    .iosbar .mini .v{font-size: 15px; font-weight: 900; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}
    .iosbar .mini .v.good{color: rgba(56,209,138,0.95)}
    .iosbar .mini .v.bad{color: rgba(255,92,122,0.98)}
    .iosbar .actions{display:flex; gap:10px; flex: 0 0 auto;}
    .iosbar .btn{padding: 12px 14px; border-radius: 14px; white-space: nowrap;}
    @media (max-width: 980px){
      .grid{grid-template-columns: 1fr}
      .iosbar{display:block}
      .wrap{padding-bottom: calc(140px + env(safe-area-inset-bottom));}
    }
  


    /* iOS: prevent zoom on input focus */
    @supports (-webkit-touch-callout: none) {
      input, select, textarea, button { font-size: 16px; }
    }

</style>
</head>
<body>
<div class="wrap">
<header>
<div class="brand">
<div aria-hidden="true" class="badge"></div>
<div>
<h1>DA42 VI â€” Takeoff Performance</h1>
<div class="sub">Interpolation + facteurs vent/piste + marge TORA (MTOM)</div>
</div>
</div>
<div class="topright">
<div class="chip">Units: kt / ft / Â°C / m</div>
<div class="chip">Tables: MTOM 1999 kg</div>
</div>
</header>
<div class="grid">
<!-- LEFT: Inputs -->
<section class="card">
<div class="head">
<div>
<div class="title2">Inputs</div>
<div class="hint">Renseigne les champs, puis â€œComputeâ€</div>
</div>
<div class="pillrow">
<div class="pill">Normal = FLAPS UP</div>
<div class="pill">Short = FLAPS APP</div>
</div>
</div>
<div class="body">
<div aria-label="Takeoff configuration tabs" class="tabs" role="tablist">
<div aria-selected="true" class="tab active" data-mode="normal" role="tab">
<div>
<div class="label">Normal Takeoff</div>
<div class="meta">FLAPS UP</div>
</div>
<div class="meta">MTOM</div>
</div>
<div aria-selected="false" class="tab" data-mode="short" role="tab">
<div>
<div class="label">Short Takeoff</div>
<div class="meta">FLAPS APP</div>
</div>
<div class="meta">MTOM</div>
</div>
</div>
<div aria-label="Primary inputs" class="formgrid">
<div class="field">
<label>Runway QFU <span>Â°</span></label>
<input id="rwq" inputmode="numeric" max="360" min="0" placeholder="ex: 270" type="number">
</div>
<div class="field">
<label>TORA <span>m</span></label>
<input id="tora" inputmode="decimal" min="0" placeholder="ex: 1800" type="number">
</div>
<div class="field">
<label>Wind direction <span>Â°</span></label>
<input id="wdir" inputmode="numeric" max="360" min="0" placeholder="ex: 240" type="number">
</div>
<div class="field">
<label>Wind speed <span>kt</span></label>
<input id="wspd" inputmode="decimal" min="0" placeholder="ex: 12" type="number">
</div>
<div class="field">
<label>Pressure altitude <span>ft</span></label>
<input id="pa" inputmode="decimal" placeholder="ex: 1350" type="number">
</div>
<div class="field">
<label>OAT <span>Â°C</span></label>
<input id="oat" inputmode="decimal" placeholder="ex: 18" type="number">
</div>
<div class="field" style="grid-column:1 / -1;">
<label>Output mode</label>
<select id="outmode">
<option value="50">Takeoff distance over 50 ft</option>
<option value="gr">Ground roll</option>
<option value="both">Both</option>
</select>
</div>
</div>
<div class="sectiontitle">Runway / corrections</div>
<div aria-label="Runway corrections options" class="options">
<label class="opt">
<input checked="" name="grassdry" type="radio" value="0">
<div>
<div class="t">Paved / none</div>
<div class="d">No grass correction</div>
</div>
</label>
<label class="opt">
<input name="grassdry" type="radio" value="0.10">
<div>
<div class="t">Grass runway â€” dry (5 cm)</div>
<div class="d">+10%</div>
</div>
</label>
<label class="opt">
<input name="grassdry" type="radio" value="0.15">
<div>
<div class="t">Grass runway â€” dry (5â€“10 cm)</div>
<div class="d">+15%</div>
</div>
</label>
<label class="opt">
<input name="grassdry" type="radio" value="0.25">
<div>
<div class="t">Grass runway â€” dry (25 cm)</div>
<div class="d">+25%</div>
</div>
</label>
<label class="opt">
<input name="grassdry" type="radio" value="NO">
<div>
<div class="t">Grass runway â€” &gt; 25 cm</div>
<div class="d">Take-off should not be attempted</div>
</div>
</label>
<label class="opt">
<input id="grasswet" type="checkbox">
<div>
<div class="t">Grass runway â€” wet</div>
<div class="d">+10% (en plus du calcul â€œdry grassâ€)</div>
</div>
</label>
<label class="opt">
<input id="soft" type="checkbox">
<div>
<div class="t">Soft ground</div>
<div class="d">+45% (en plus si applicable)</div>
</div>
</label>
</div>
<div class="divider"></div>
<div class="row">
<div class="field">
<label>Uphill slope <span>%</span></label>
<input id="slope" inputmode="decimal" min="0" placeholder="ex: 1.5" type="number">
</div>
<div class="field">
<label>Table weight</label>
<select id="weight" title="Optionnel si ton avion est en MTOM 1900 kg.">
<option selected="" value="1999">1999 kg (MTOM option)</option>
<option value="1900">1900 kg</option>
<option value="1700">1700 kg</option>
</select>
</div>
</div>
<div aria-label="Action buttons" class="btnrow">
<button class="btn primary" id="compute">Compute</button>
<button class="btn" id="reset" type="button">Reset</button>
</div>
<div class="alert" id="alert"></div>
<div class="footnote">
            Interpolation bilinÃ©aire PAÃ—OAT sur les tables. Si une zone est â€œnon publiÃ©eâ€ (cellules noires/diagonales),
            lâ€™outil renvoie â€œN/Aâ€ et affiche un warning.
          </div>
</div>
</section>
<!-- RIGHT: Results -->
<aside class="card">
<div class="head">
<div>
<div class="title2">Results</div>
<div class="hint">Vent composante + distances corrigÃ©es + marge</div>
</div>
<div class="pillrow">
<div class="pill mono" id="modepill">Mode: Normal</div>
</div>
</div>
<div class="body">
<div class="results">
<div class="kpi">
<div class="k">Headwind / Tailwind</div>
<div class="v mono" id="hw">HW 0.0 kt</div>
<div class="s mono" id="hwdesc">Î” = 0Â° Â· wind factor = 1.000</div>
</div>
<div class="kpi">
<div class="k">Crosswind</div>
<div class="v mono" id="xw">0.0 kt</div>
<div class="s mono" id="xwdesc">from right Â· signed 0.0 kt</div>
</div>
<div class="kpi">
<div class="k">Corrected distance</div>
<div class="v mono" id="dist">730 m</div>
<div class="s mono" id="distdesc">Using 50 ft distance Â· runway factor = 1.000</div>
</div>
<div class="kpi">
<div class="k">TORA margin</div>
<div class="v mono" id="margin">1070 m</div>
<div class="s mono" id="margindesc">TORA 1800 âˆ’ DIST 730</div>
</div>
<div class="verdict good" id="verdict">
<div class="left">
<div class="big mono" id="verdictText">Verdict: OK</div>
<div class="small" id="verdictSub">Positive margin: 1070 m</div>
</div>
<div class="status good" id="status">MARGIN</div>
</div>
</div>
<div class="divider"></div>
<div class="sectiontitle">Details</div>
<div class="footnote mono" id="details">Mode=normal Â· Table weight=1999 kg
PA=0 ft Â· OAT=0.0Â°C
Base (interpolated): GR=400.0 m Â· 50ft=730.0 m
Factors: wind=1.000 Â· runway=1.000 Â· total=1.000</div>
</div>
</aside>
</div>
</div>
<script>
/**
 * Tables encodÃ©es depuis les pages Take-Off (MTOM 1999 / 1900 / 1700) :
 * - Normal Procedure (FLAPS UP)
 * - Short Field Procedure (FLAPS APP)
 *
 * Grille:
 *  ALT_ft = [0,1000,...,10000]
 *  OAT_C  = [0,10,20,30,40,50]
 * Valeurs en mÃ¨tres (m).
 * Les cellules â€œnon publiÃ©esâ€ sont null.
 */
const GRID_ALT = [0,1000,2000,3000,4000,5000,6000,7000,8000,9000,10000];
const GRID_OAT = [0,10,20,30,40,50];

// Helper to create 2D arrays from row lists
function A(rows){ return rows; }

const TABLES = {
  // Weight: 1999 kg
  "1999": {
    normal: {
      gr: A([
        [400,420,440,470,560,680],
        [420,440,470,510,610,730],
        [440,460,500,540,660,790],
        [460,490,520,590,710,860],
        [490,520,560,640,780,930],
        [520,550,600,690,840,null],
        [550,580,640,760,920,null],
        [580,620,680,820,990,null],
        [620,660,730,900,1080,null],
        [660,710,800,980,1180,null],
        [700,770,900,1100,null,null],
      ]),
      d50: A([
        [730,760,790,870,1050,1330],
        [760,800,840,930,1150,1450],
        [800,840,890,1000,1260,1570],
        [840,880,940,1080,1360,1710],
        [880,920,1000,1170,1490,1850],
        [920,980,1070,1280,1620,null],
        [970,1030,1140,1400,1760,null],
        [1030,1100,1220,1530,1910,null],
        [1090,1170,1320,1660,2080,null],
        [1150,1240,1450,1840,2280,null],
        [1230,1360,1640,2110,null,null],
      ])
    },
    short: {
      gr: A([
        [350,370,390,420,500,610],
        [370,390,410,450,540,660],
        [390,410,440,490,590,720],
        [410,440,470,530,650,790],
        [440,460,500,580,710,860],
        [470,490,540,630,780,null],
        [500,530,580,690,850,null],
        [530,560,620,760,930,null],
        [560,600,670,830,1010,null],
        [600,650,740,920,1120,null],
        [650,710,840,1040,null,null],
      ]),
      d50: A([
        [600,640,670,730,890,1120],
        [640,670,710,790,980,1230],
        [670,710,760,850,1080,1360],
        [710,750,810,930,1180,1500],
        [750,790,870,1020,1300,1640],
        [790,840,930,1130,1440,null],
        [840,900,1000,1240,1590,null],
        [900,960,1080,1380,1750,null],
        [950,1030,1180,1520,1940,null],
        [1020,1110,1320,1710,2200,null],
        [1100,1230,1520,2010,null,null],
      ])
    }
  },

  // Weight: 1900 kg (from page 188/?? short and page 185 normal) â€” encoded to match UI dropdown
  "1900": {
    normal: {
      gr: A([
        [370,390,410,450,520,640],
        [390,410,440,480,570,690],
        [420,440,470,510,620,750],
        [440,460,490,550,670,810],
        [460,490,530,600,730,880],
        [490,520,560,650,790,null],
        [520,550,600,710,860,null],
        [550,590,640,780,930,null],
        [580,620,690,840,1010,null],
        [620,670,760,920,1110,null],
        [660,720,840,1030,null,null],
      ]),
      d50: A([
        [670,710,730,800,960,1210],
        [710,740,780,860,1060,1310],
        [740,770,820,920,1150,1420],
        [770,810,870,990,1250,1550],
        [810,850,920,1080,1350,1670],
        [850,900,990,1180,1470,null],
        [900,950,1050,1280,1600,null],
        [950,1010,1130,1400,1740,null],
        [1000,1080,1210,1520,1880,null],
        [1060,1150,1330,1680,2090,null],
        [1140,1250,1500,1910,null,null],
      ])
    },
    short: {
      gr: A([
        [330,350,370,400,470,570],
        [350,370,390,430,510,630],
        [370,390,420,460,560,680],
        [390,410,440,500,610,740],
        [410,440,470,540,670,810],
        [440,470,510,600,730,null],
        [470,500,540,650,800,null],
        [500,530,590,720,870,null],
        [530,570,640,780,950,null],
        [570,610,700,860,1050,null],
        [610,670,790,980,null,null],
      ]),
      d50: A([
        [560,590,620,680,820,1030],
        [590,620,660,730,900,1130],
        [620,660,700,790,990,1240],
        [660,690,750,860,1090,1360],
        [700,740,800,940,1190,1490],
        [740,780,860,1040,1310,null],
        [780,840,930,1140,1440,null],
        [830,890,1000,1260,1590,null],
        [890,960,1090,1390,1750,null],
        [950,1030,1210,1550,1980,null],
        [1020,1140,1380,1810,null,null],
      ])
    }
  },

  // Weight: 1700 kg (tables)
  "1700": {
    normal: {
      gr: A([
        [330,350,360,390,460,560],
        [350,360,390,420,500,600],
        [370,390,410,450,540,650],
        [390,410,440,480,590,710],
        [410,430,460,530,640,770],
        [430,460,490,580,700,null],
        [460,490,530,630,760,null],
        [480,520,560,680,820,null],
        [520,550,610,740,890,null],
        [550,590,670,810,970,null],
        [590,640,740,910,null,null],
      ]),
      d50: A([
        [580,600,630,680,810,1010],
        [598,630,670,730,890,1100],
        [630,660,700,780,970,1190],
        [660,700,740,840,1050,1290],
        [700,730,790,910,1140,1390],
        [730,770,840,1000,1240,null],
        [770,820,900,1090,1340,null],
        [810,870,960,1180,1450,null],
        [860,920,1030,1290,1570,null],
        [910,980,1130,1410,1740,null],
        [980,1070,1270,1600,null,null],
      ])
    },
    short: {
      gr: A([
        [290,310,320,350,410,500],
        [310,320,340,380,450,550],
        [330,350,370,410,490,600],
        [350,360,390,440,540,650],
        [370,390,420,480,590,710],
        [390,410,450,520,640,null],
        [410,440,480,580,700,null],
        [440,470,520,630,770,null],
        [470,500,560,690,840,null],
        [500,540,620,760,930,null],
        [540,590,690,860,null,null],
      ]),
      d50: A([
        [490,510,540,590,700,870],
        [510,540,570,630,770,950],
        [540,570,610,680,840,1040],
        [570,600,650,730,920,1140],
        [600,640,690,810,1010,1250],
        [640,680,740,880,1100,null],
        [680,720,800,970,1210,null],
        [720,770,860,1070,1330,null],
        [760,820,930,1170,1460,null],
        [820,880,1030,1300,1630,null],
        [880,970,1170,1500,null,null],
      ])
    }
  }
};

function clamp(v, lo, hi){ return Math.min(hi, Math.max(lo, v)); }

function normalizeDeg(d){
  let x = d % 360;
  if (x < 0) x += 360;
  return x;
}
function wrap180(d){
  let x = ((d + 180) % 360) - 180;
  if (x < -180) x += 360;
  return x;
}

function fmtNum(x, digits=0){
  if (x === null || x === undefined || Number.isNaN(x)) return "N/A";
  return x.toFixed(digits);
}

/**
 * Bilinear interpolation on grid with possible null cells.
 * Returns {value, note}
 */
function bilinear(grid, xVals, yVals, x, y){
  // x = PA, y = OAT
  const note = [];
  // clamp within bounds but note
  const x0 = xVals[0], xN = xVals[xVals.length-1];
  const y0 = yVals[0], yN = yVals[yVals.length-1];

  let xc = x, yc = y;
  if (x < x0){ xc = x0; note.push("PA below table â†’ clamped to SL"); }
  if (x > xN){ xc = xN; note.push("PA above table â†’ clamped to 10000 ft"); }
  if (y < y0){ yc = y0; note.push("OAT below table â†’ clamped to 0Â°C"); }
  if (y > yN){ yc = yN; note.push("OAT above table â†’ clamped to 50Â°C (caution)"); }

  // find bracketing indices
  function bracket(vals, v){
    for (let i=0;i<vals.length-1;i++){
      if (v >= vals[i] && v <= vals[i+1]) return [i, i+1];
    }
    return [vals.length-2, vals.length-1]; // edge
  }
  const [ix0, ix1] = bracket(xVals, xc);
  const [iy0, iy1] = bracket(yVals, yc);

  const xA=xVals[ix0], xB=xVals[ix1];
  const yA=yVals[iy0], yB=yVals[iy1];
  const tx = (xB===xA)?0:( (xc-xA)/(xB-xA) );
  const ty = (yB===yA)?0:( (yc-yA)/(yB-yA) );

  const Q11 = grid[ix0][iy0];
  const Q21 = grid[ix1][iy0];
  const Q12 = grid[ix0][iy1];
  const Q22 = grid[ix1][iy1];

  // If any corner null, try degrade to 1D if possible
  const corners = [Q11,Q21,Q12,Q22];
  const allOk = corners.every(v => v !== null && v !== undefined);
  if (!allOk){
    // Try interpolate along y at ix0 if both exist
    const g0a = Q11, g0b = Q12;
    const g1a = Q21, g1b = Q22;

    function lerp(a,b,t){ return a + (b-a)*t; }

    // If x exactly on a grid line, do 1D along y
    if (ix0 === ix1 || xA === xB){
      if (g0a!=null && g0b!=null) return {value: lerp(g0a,g0b,ty), note: note.concat(["Missing cells â†’ 1D interpolation (OAT)"])};
      return {value: null, note: note.concat(["Requested point falls into non-published area"])};
    }
    // If y exactly on grid line, do 1D along x
    if (iy0 === iy1 || yA === yB){
      if (Q11!=null && Q21!=null) return {value: lerp(Q11,Q21,tx), note: note.concat(["Missing cells â†’ 1D interpolation (PA)"])};
      return {value: null, note: note.concat(["Requested point falls into non-published area"])};
    }

    // Try: compute interpolated on each x line if possible, then interpolate x
    let v0 = null, v1 = null;
    if (g0a!=null && g0b!=null) v0 = lerp(g0a,g0b,ty);
    if (g1a!=null && g1b!=null) v1 = lerp(g1a,g1b,ty);
    if (v0!=null && v1!=null) return {value: lerp(v0,v1,tx), note: note.concat(["Missing cells â†’ 2-step interpolation"])};

    return {value: null, note: note.concat(["Requested point falls into non-published area"])};
  }

  const v =
    Q11*(1-tx)*(1-ty) +
    Q21*(tx)*(1-ty) +
    Q12*(1-tx)*(ty) +
    Q22*(tx)*(ty);
  return {value: v, note};
}

function getRadioValue(name){
  const el = document.querySelector(`input[name="${name}"]:checked`);
  return el ? el.value : null;
}

let MODE = "normal"; // normal | short

const tabs = document.querySelectorAll(".tab");
tabs.forEach((t) => {
  t.addEventListener("click", () => {
    tabs.forEach(x => { x.classList.remove("active"); x.setAttribute("aria-selected","false"); });
    t.classList.add("active");
    t.setAttribute("aria-selected","true");
    MODE = t.dataset.mode;
    document.getElementById("modepill").textContent = `Mode: ${MODE==="normal"?"Normal":"Short"}`;
  });
});

function showAlert(lines){
  const a = document.getElementById("alert");
  if (!lines || lines.length===0){
    a.classList.remove("show");
    a.innerHTML = "";
    return;
  }
  a.classList.add("show");
  a.innerHTML = lines.map(x => `â€¢ ${x}`).join("<br/>");
}


function updateIOSBar(){
  const dist = document.getElementById("dist")?.textContent ?? "â€”";
  const margin = document.getElementById("margin")?.textContent ?? "â€”";
  const verdict = document.getElementById("verdictText")?.textContent ?? "Verdict: â€”";

  const iosDist = document.getElementById("ios_dist");
  const iosMargin = document.getElementById("ios_margin");
  const iosVerdict = document.getElementById("ios_verdict");

  if (iosDist) iosDist.textContent = dist;
  if (iosMargin) iosMargin.textContent = margin;
  if (iosVerdict) iosVerdict.textContent = verdict.replace("Verdict: ","");

  if (iosVerdict){
    iosVerdict.classList.remove("good","bad");
    const v = verdict.toLowerCase();
    if (v.includes("ok") && !v.includes("not ok")) iosVerdict.classList.add("good");
    if (v.includes("not ok") || v.includes("do not attempt")) iosVerdict.classList.add("bad");
  }
}

function compute(){
  const rwq = parseFloat(document.getElementById("rwq").value);
  const tora = parseFloat(document.getElementById("tora").value);
  const wdir = parseFloat(document.getElementById("wdir").value);
  const wspd = parseFloat(document.getElementById("wspd").value);
  const pa   = parseFloat(document.getElementById("pa").value);
  const oat  = parseFloat(document.getElementById("oat").value);
  const outmode = document.getElementById("outmode").value;
  const slope = parseFloat(document.getElementById("slope").value || "0");
  const wet = document.getElementById("grasswet").checked;
  const soft = document.getElementById("soft").checked;
  const grassDry = getRadioValue("grassdry");
  const weight = document.getElementById("weight").value;

  const warn = [];
  const need = [
    ["Runway QFU", rwq],
    ["TORA", tora],
    ["Wind dir", wdir],
    ["Wind speed", wspd],
    ["Pressure alt", pa],
    ["OAT", oat],
  ].filter(([_,v]) => Number.isNaN(v));
  if (need.length){
    showAlert(["Remplis tous les champs: " + need.map(x => x[0]).join(", ")]);
    setWaiting();
    return;
  }

  if (grassDry === "NO"){
    warn.push("Grass > 25 cm: take-off should not be attempted.");
  }
  if (slope < 0) warn.push("Slope nÃ©gative: non gÃ©rÃ©e (mets 0 si downhill).");
  if (Number.isNaN(slope)) warn.push("Slope invalide â†’ 0% appliquÃ©.");

  const rwqN = normalizeDeg(rwq);
  const wdirN = normalizeDeg(wdir);
  const delta = wrap180(wdirN - rwqN);
  const rad = delta * Math.PI/180;

  const head = wspd * Math.cos(rad); // + = headwind
  const cross = wspd * Math.sin(rad); // + = from right? (sign indicates direction)
  const headAbs = Math.abs(head);
  const crossAbs = Math.abs(cross);

  const headStr = head >= 0 ? `HW ${fmtNum(head,1)} kt` : `TW ${fmtNum(-head,1)} kt`;
  const xwSide = cross >= 0 ? "from right" : "from left";

  // Interpolate base distances from tables
  const tab = TABLES[weight][MODE];
  const gr0 = bilinear(tab.gr, GRID_ALT, GRID_OAT, pa, oat);
  const d50 = bilinear(tab.d50, GRID_ALT, GRID_OAT, pa, oat);

  // Build factors
  // Wind factor: -10% per 14 kt headwind; +10% per 3 kt tailwind
  let windFactor = 1.0;
  if (head > 0){
    windFactor *= (1 - 0.10 * (head/14.0));
  } else if (head < 0){
    windFactor *= (1 + 0.10 * ((-head)/3.0));
  }
  // Prevent insane negative
  windFactor = Math.max(0.10, windFactor);

  // Runway factors (applied to both outputs as conservative)
  let runwayFactor = 1.0;
  if (grassDry && grassDry !== "NO"){
    runwayFactor *= (1 + parseFloat(grassDry));
    if (wet) runwayFactor *= 1.10;
  } else {
    if (wet) warn.push("Grass wet cochÃ© mais grass dry = none â†’ ignorÃ©.");
  }
  if (soft) runwayFactor *= 1.45;
  if (!Number.isNaN(slope) && slope > 0){
    runwayFactor *= (1 + 0.09*slope); // +9% per 1%
  }

  // Output selection
  let base = null, baseLabel = "";
  let notes = [];
  if (outmode === "gr"){
    base = gr0.value;
    baseLabel = "Ground roll";
    notes = notes.concat(gr0.note);
  } else if (outmode === "50"){
    base = d50.value;
    baseLabel = "50 ft distance";
    notes = notes.concat(d50.note);
  } else { // both
    // We'll compute corrected for both and show 50ft as primary plus note
    base = d50.value;
    baseLabel = "50 ft distance (primary)";
    notes = notes.concat(d50.note);
  }

  // If non published -> N/A
  const nonPublished = (base === null || base === undefined || Number.isNaN(base));
  const nonPublishedGR = (gr0.value===null || gr0.value===undefined);
  const nonPublished50 = (d50.value===null || d50.value===undefined);

  // Compute corrected values
  let correctedGR = nonPublishedGR ? null : gr0.value * windFactor * runwayFactor;
  let corrected50 = nonPublished50 ? null : d50.value * windFactor * runwayFactor;

  // Choose distance used for margin
  let distUsed = null;
  let distDesc = "";
  if (outmode === "gr"){
    distUsed = correctedGR;
    distDesc = "Using ground roll";
  } else if (outmode === "50"){
    distUsed = corrected50;
    distDesc = "Using 50 ft distance";
  } else {
    distUsed = corrected50;
    distDesc = "Primary: 50 ft (also computes ground roll)";
  }

  // Margin
  let margin = null;
  if (distUsed != null) margin = tora - distUsed;

  // Warnings for missing areas
  if (outmode === "both"){
    if (nonPublishedGR) warn.push("Ground roll: N/A (non-published area).");
    if (nonPublished50) warn.push("50 ft distance: N/A (non-published area).");
  } else if (nonPublished){
    warn.push("Requested point is in a non-published area of the table (cells black/diagonal).");
  }

  // Update UI KPIs
  document.getElementById("hw").textContent = headStr;
  document.getElementById("hwdesc").textContent = `Î” = ${fmtNum(delta,0)}Â° Â· wind factor = ${fmtNum(windFactor,3)}`;
  document.getElementById("xw").textContent = `${fmtNum(crossAbs,1)} kt`;
  document.getElementById("xwdesc").textContent = `${xwSide} Â· signed ${fmtNum(cross,1)} kt`;

  // Distance KPI
  const distEl = document.getElementById("dist");
  const distDescEl = document.getElementById("distdesc");

  if (outmode === "both"){
    const d1 = corrected50==null ? "N/A" : `${fmtNum(corrected50,0)} m`;
    const d2 = correctedGR==null ? "N/A" : `${fmtNum(correctedGR,0)} m`;
    distEl.textContent = d1;
    distDescEl.textContent = `50 ft: ${d1} Â· GR: ${d2} Â· runway factor = ${fmtNum(runwayFactor,3)}`;
  } else {
    distEl.textContent = distUsed==null ? "N/A" : `${fmtNum(distUsed,0)} m`;
    distDescEl.textContent = `${distDesc} Â· runway factor = ${fmtNum(runwayFactor,3)}`;
  }

  // Margin KPI
  document.getElementById("margin").textContent = margin==null ? "N/A" : `${fmtNum(margin,0)} m`;
  document.getElementById("margindesc").textContent = margin==null ? "â€”" : `TORA ${fmtNum(tora,0)} âˆ’ DIST ${fmtNum(distUsed,0)}`;

  // Verdict
  const verdict = document.getElementById("verdict");
  const verdictText = document.getElementById("verdictText");
  const verdictSub = document.getElementById("verdictSub");
  const status = document.getElementById("status");

  verdict.classList.remove("good","bad");
  status.classList.remove("good","bad","warn");

  let v = "â€”", s = "â€”", sub = "â€”";

  if (grassDry === "NO"){
    v = "NOT OK";
    s = "DO NOT ATTEMPT";
    sub = "Grass longer than 25 cm";
    verdict.classList.add("bad");
    status.classList.add("bad");
  } else if (distUsed == null || margin == null){
    v = "N/A";
    s = "CHECK LIMITS";
    sub = "Performance not available for these conditions";
    status.classList.add("warn");
  } else if (margin >= 0){
    v = "OK";
    s = "MARGIN";
    sub = `Positive margin: ${fmtNum(margin,0)} m`;
    verdict.classList.add("good");
    status.classList.add("good");
  } else {
    v = "NOT OK";
    s = "INSUFFICIENT";
    sub = `Negative margin: ${fmtNum(margin,0)} m`;
    verdict.classList.add("bad");
    status.classList.add("bad");
  }

  verdictText.textContent = `Verdict: ${v}`;
  verdictSub.textContent = sub;
  status.textContent = s;

  // Details
  const det = [];
  det.push(`Mode=${MODE} Â· Table weight=${weight} kg`);
  det.push(`PA=${fmtNum(pa,0)} ft Â· OAT=${fmtNum(oat,1)}Â°C`);
  det.push(`Base (interpolated): GR=${gr0.value==null?"N/A":fmtNum(gr0.value,1)} m Â· 50ft=${d50.value==null?"N/A":fmtNum(d50.value,1)} m`);
  det.push(`Factors: wind=${fmtNum(windFactor,3)} Â· runway=${fmtNum(runwayFactor,3)} Â· total=${fmtNum(windFactor*runwayFactor,3)}`);
  if (notes.length) det.push(`Notes: ${notes.join(" | ")}`);
  document.getElementById("details").textContent = det.join("\n");

  updateIOSBar();
  showAlert(warn);
}

function setWaiting(){
  document.getElementById("hw").textContent = "â€”";
  document.getElementById("hwdesc").textContent = "â€”";
  document.getElementById("xw").textContent = "â€”";
  document.getElementById("xwdesc").textContent = "â€”";
  document.getElementById("dist").textContent = "â€”";
  document.getElementById("distdesc").textContent = "â€”";
  document.getElementById("margin").textContent = "â€”";
  document.getElementById("margindesc").textContent = "â€”";
  document.getElementById("details").textContent = "â€”";

  const verdict = document.getElementById("verdict");
  verdict.classList.remove("good","bad");
  const status = document.getElementById("status");
  status.classList.remove("good","bad","warn");
  document.getElementById("verdictText").textContent = "Verdict: â€”";
  document.getElementById("verdictSub").textContent = "Waiting for inputs";
  status.textContent = "â€”";
  updateIOSBar();
}
window.addEventListener("DOMContentLoaded", () => {
  // Bind buttons safely (iOS bar is appended after the script in this build)
  const iosBtn = document.getElementById("ios_compute");
  if (iosBtn){
    iosBtn.addEventListener("click", (e) => {
      e.preventDefault();
      compute();
    });
  }

document.getElementById("compute").addEventListener("click", (e) => {
  e.preventDefault();
  compute();
});

document.getElementById("reset").addEventListener("click", () => {
  for (const id of ["rwq","tora","wdir","wspd","pa","oat","slope"]){
    document.getElementById(id).value = "";
  }
  document.getElementById("grasswet").checked = false;
  document.getElementById("soft").checked = false;
  document.querySelector('input[name="grassdry"][value="0"]').checked = true;
  document.getElementById("outmode").value = "50";
  document.getElementById("weight").value = "1999";
  showAlert([]);
  
  // Initial UI state
  setWaiting();
  updateIOSBar();
});
});

// Autocalc on Enter
document.addEventListener("keydown", (e) => {
  if (e.key === "Enter"){
    const tag = (e.target && e.target.tagName || "").toLowerCase();
    if (tag === "input" || tag === "select"){
      e.preventDefault();
      compute();
    }
  }
});


</script>
<!-- iOS Sticky Summary Bar (visible on small screens) -->
<div aria-label="RÃ©sumÃ© performance" class="iosbar" role="region">
<div class="inner">
<div class="kpis">
<div class="mini">
<div class="k">Distance</div>
<div class="v mono" id="ios_dist">730 m</div>
</div>
<div class="mini">
<div class="k">Marge TORA</div>
<div class="v mono" id="ios_margin">1070 m</div>
</div>
<div class="mini">
<div class="k">Verdict</div>
<div class="v mono good" id="ios_verdict">OK</div>
</div>
</div>
<div class="actions">
<button class="btn primary" id="ios_compute">Compute</button>
</div>
</div>
</div>

<script>
/* --- DA42 EFB: shared inputs sync (Takeoff <-> Landing) --- */
(function () {
  const FIELDS = ["icao","runway","rwq","tora","lda","wdir","wspd","pa","oat","slope","weight"];
  const STORAGE_KEY = "da42_state_v1";

  function readLocal() {
    try { return JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}"); }
    catch { return {}; }
  }
  function writeLocal(state) {
    try { localStorage.setItem(STORAGE_KEY, JSON.stringify(state || {})); } catch {}
  }

  function applyState(state) {
    if (!state) return;
    FIELDS.forEach((id) => {
      const el = document.getElementById(id);
      if (!el) return;
      if (document.activeElement === el) return; // don't fight user typing
      if (state[id] !== undefined && state[id] !== null) {
        el.value = String(state[id]);
      }
    });
  }

  function sendUpdate(id, value) {
    // In iframe (data: URL) we can't reliably share localStorage, so use postMessage.
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({ type: "da42:update", id, value }, "*");
    } else {
      const st = readLocal();
      st[id] = value;
      writeLocal(st);
    }
  }

  function requestState() {
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({ type: "da42:request" }, "*");
    } else {
      applyState(readLocal());
    }
  }

  // Listen state pushed by parent (or other page)
  window.addEventListener("message", (e) => {
    const d = e.data || {};
    if (d.type === "da42:state") applyState(d.state || {});
    if (d.type === "da42:update" && d.id) applyState({ [d.id]: d.value });
  });

  // Any input change -> push
  function onAnyChange(ev) {
    const t = ev.target;
    if (!t || !t.id) return;
    if (!FIELDS.includes(t.id)) return;
    sendUpdate(t.id, t.value);
  }
  document.addEventListener("input", onAnyChange, true);
  document.addEventListener("change", onAnyChange, true);

  // Initial load
  requestState();
})();
</script>

</body></html>